<html xmlns="http://www.w3.org/1999/xhtml"><head><meta content="text/xhtml;charset=UTF-8" http-equiv="Content-Type" /><meta content="IE=9" http-equiv="X-UA-Compatible" /><meta content="Doxygen 1.8.3.1" name="generator" /><title>_i_data_base_8h_source</title><link href="tabs.css" rel="stylesheet" type="text/css" /><script src="jquery.js" type="text/javascript"></script><script src="dynsections.js" type="text/javascript"></script><link href="navtree.css" rel="stylesheet" type="text/css" /><script src="resize.js" type="text/javascript"></script><script src="navtree.js" type="text/javascript"></script><script type="text/javascript">

  $(document).ready(initResizable);

  $(window).load(resizeHeight);

</script><link href="search/search.css" rel="stylesheet" type="text/css" /><script src="search/search.js" type="text/javascript"></script><script type="text/javascript">

  $(document).ready(function() { searchBox.OnSelectItem(0); });

</script><link href="doxygen.css" rel="stylesheet" type="text/css" /></head><body><div id="top"><div id="titlearea"><table cellpadding="0" cellspacing="0"><tbody><tr style="height: 56px;"><td id="projectlogo"><img alt="Logo" src="adobe_logo.png" /></td><td style="padding-left: 0.5em;"><div id="projectname">InDesign SDK &nbsp;<span id="projectnumber">15.0.0</span></div></td></tr></tbody></table></div><script type="text/javascript">

var searchBox = new SearchBox("searchBox", "search",false,'Search');

</script><div class="tabs" id="navrow1"><ul class="tablist"><li><a href="index.html"><span>InDesign&nbsp;SDK</span></a><li><a href="pages.html"><span>Documentation</span></a><li><a href="group__bosses__parent.html"><span>Bosses</span></a><li><a href="group__sdk.html"><span>Sample&nbsp;plug-ins</span></a><li><a href="classes.html"><span>Class&nbsp;Index</span></a><li><div class="MSearchBoxInactive" id="MSearchBox"><span class="left"> <img alt="" id="MSearchSelect" onmouseout="return searchBox.OnSearchSelectHide()" onmouseover="return searchBox.OnSearchSelectShow()" src="search/mag_sel.png" /> <input accesskey="S" id="MSearchField" onblur="searchBox.OnSearchFieldFocus(false)" onfocus="searchBox.OnSearchFieldFocus(true)" onkeyup="searchBox.OnSearchFieldChange(event)" type="text" value="Search" /> </span><span class="right"> <a href="javascript:searchBox.CloseResultsWindow()" id="MSearchClose"><img alt="" border="0" id="MSearchCloseImg" src="search/close.png" /></a> </span></div></ul></div></div><div class="ui-resizable side-nav-resizable" id="side-nav"><div id="nav-tree"><div id="nav-tree-contents"><div class="sync" id="nav-sync"></div></div></div><div class="ui-resizable-handle" id="splitbar" style="-moz-user-select:none;"></div></div><script type="text/javascript">

$(document).ready(function(){initNavTree('_i_data_base_8h_source.html','');});

</script><div id="doc-content"><div id="MSearchSelectWindow" onkeydown="return searchBox.OnSearchSelectKey(event)" onmouseout="return searchBox.OnSearchSelectHide()" onmouseover="return searchBox.OnSearchSelectShow()"><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&nbsp;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&nbsp;</span>Pages</a></div><div id="MSearchResultsWindow"><iframe frameborder="0" id="MSearchResults" name="MSearchResults" src="javascript:void(0)"></iframe></div><div class="header"><div class="headertitle"><div class="title">IDataBase.h</div></div></div><div class="contents"><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno"> 1</span>&nbsp;<span class="comment">//========================================================================================</span></div><div class="line"><a name="l00002"></a><span class="lineno"> 2</span>&nbsp;<span class="comment">// </span></div><div class="line"><a name="l00003"></a><span class="lineno"> 3</span>&nbsp;<span class="comment">// $File: //depot/indesign_15.0/gm/source/public/interfaces/architecture/IDataBase.h $</span></div><div class="line"><a name="l00004"></a><span class="lineno"> 4</span>&nbsp;<span class="comment">// </span></div><div class="line"><a name="l00005"></a><span class="lineno"> 5</span>&nbsp;<span class="comment">// Owner: Roey Horns </span></div><div class="line"><a name="l00006"></a><span class="lineno"> 6</span>&nbsp;<span class="comment">// </span></div><div class="line"><a name="l00007"></a><span class="lineno"> 7</span>&nbsp;<span class="comment">// $Author: sanyjain $</span></div><div class="line"><a name="l00008"></a><span class="lineno"> 8</span>&nbsp;<span class="comment">// </span></div><div class="line"><a name="l00009"></a><span class="lineno"> 9</span>&nbsp;<span class="comment">// $DateTime: 2019/10/10 11:13:16 $</span></div><div class="line"><a name="l00010"></a><span class="lineno"> 10</span>&nbsp;<span class="comment">// </span></div><div class="line"><a name="l00011"></a><span class="lineno"> 11</span>&nbsp;<span class="comment">// $Revision: #3 $</span></div><div class="line"><a name="l00012"></a><span class="lineno"> 12</span>&nbsp;<span class="comment">// </span></div><div class="line"><a name="l00013"></a><span class="lineno"> 13</span>&nbsp;<span class="comment">// $Change: 1061001 $</span></div><div class="line"><a name="l00014"></a><span class="lineno"> 14</span>&nbsp;<span class="comment">// </span></div><div class="line"><a name="l00015"></a><span class="lineno"> 15</span>&nbsp;<span class="comment">// Copyright 1997-2010 Adobe Systems Incorporated. All rights reserved.</span></div><div class="line"><a name="l00016"></a><span class="lineno"> 16</span>&nbsp;<span class="comment">// </span></div><div class="line"><a name="l00017"></a><span class="lineno"> 17</span>&nbsp;<span class="comment">// NOTICE: Adobe permits you to use, modify, and distribute this file in accordance </span></div><div class="line"><a name="l00018"></a><span class="lineno"> 18</span>&nbsp;<span class="comment">// with the terms of the Adobe license agreement accompanying it. If you have received</span></div><div class="line"><a name="l00019"></a><span class="lineno"> 19</span>&nbsp;<span class="comment">// this file from a source other than Adobe, then your use, modification, or </span></div><div class="line"><a name="l00020"></a><span class="lineno"> 20</span>&nbsp;<span class="comment">// distribution of it requires the prior written permission of Adobe.</span></div><div class="line"><a name="l00021"></a><span class="lineno"> 21</span>&nbsp;<span class="comment">// </span></div><div class="line"><a name="l00022"></a><span class="lineno"> 22</span>&nbsp;<span class="comment">// </span></div><div class="line"><a name="l00023"></a><span class="lineno"> 23</span>&nbsp;<span class="comment">// Reviewed: 10/5/98</span></div><div class="line"><a name="l00024"></a><span class="lineno"> 24</span>&nbsp;<span class="comment">// </span></div><div class="line"><a name="l00025"></a><span class="lineno"> 25</span>&nbsp;<span class="comment">// Purpose: Provides access to the database that holds a K2 publication.</span></div><div class="line"><a name="l00026"></a><span class="lineno"> 26</span>&nbsp;<span class="comment">// </span></div><div class="line"><a name="l00027"></a><span class="lineno"> 27</span>&nbsp;<span class="comment">// THIS IS NOT A STANDARD BOSS INTERFACE</span></div><div class="line"><a name="l00028"></a><span class="lineno"> 28</span>&nbsp;<span class="comment">// </span></div><div class="line"><a name="l00029"></a><span class="lineno"> 29</span>&nbsp;<span class="comment">//========================================================================================</span></div><div class="line"><a name="l00030"></a><span class="lineno"> 30</span>&nbsp;</div><div class="line"><a name="l00031"></a><span class="lineno"> 31</span>&nbsp;<span class="preprocessor">#ifndef __IDATABASE__</span></div><div class="line"><a name="l00032"></a><span class="lineno"> 32</span>&nbsp;<span class="preprocessor"></span><span class="preprocessor">#define __IDATABASE__</span></div><div class="line"><a name="l00033"></a><span class="lineno"> 33</span>&nbsp;<span class="preprocessor"></span></div><div class="line"><a name="l00034"></a><span class="lineno"> 34</span>&nbsp;<span class="preprocessor">#include &quot;IPMUnknown.h&quot;</span> <span class="comment">// for the definition of </span></div><div class="line"><a name="l00035"></a><span class="lineno"> 35</span>&nbsp;<span class="preprocessor">#include &quot;GlobalTime.h&quot;</span> <span class="comment">// should be removed, but is indirectly included by many files</span></div><div class="line"><a name="l00036"></a><span class="lineno"> 36</span>&nbsp;<span class="preprocessor">#include &quot;IDFile.h&quot;</span> <span class="comment">// for IDFile</span></div><div class="line"><a name="l00037"></a><span class="lineno"> 37</span>&nbsp;<span class="preprocessor">#include &quot;IDatabaseSnapshot.h&quot;</span></div><div class="line"><a name="l00038"></a><span class="lineno"> 38</span>&nbsp;</div><div class="line"><a name="l00039"></a><span class="lineno"> 39</span>&nbsp;<span class="keyword">class </span><a class="code" href="class_i_d_time.html">IDTime</a>;</div><div class="line"><a name="l00040"></a><span class="lineno"> 40</span>&nbsp;<span class="keyword">class </span><a class="code" href="class_i_p_m_unknown.html">IPMUnknown</a>;</div><div class="line"><a name="l00041"></a><span class="lineno"> 41</span>&nbsp;<span class="keyword">class </span>IPubFile;</div><div class="line"><a name="l00042"></a><span class="lineno"> 42</span>&nbsp;<span class="keyword">class </span><a class="code" href="class_i_p_m_persist.html">IPMPersist</a>;</div><div class="line"><a name="l00043"></a><span class="lineno"> 43</span>&nbsp;<span class="keyword">class </span><a class="code" href="class_i_database_observer.html">IDatabaseObserver</a>;</div><div class="line"><a name="l00044"></a><span class="lineno"> 44</span>&nbsp;<span class="keyword">class </span><a class="code" href="class_i_u_i_d_iterator.html">IUIDIterator</a>;</div><div class="line"><a name="l00045"></a><span class="lineno"> 45</span>&nbsp;<span class="keyword">class </span>IInstanceProcessor;</div><div class="line"><a name="l00046"></a><span class="lineno"> 46</span>&nbsp;<span class="keyword">class </span>InstanceProfiler;</div><div class="line"><a name="l00047"></a><span class="lineno"> 47</span>&nbsp;<span class="keyword">class </span>IDBChangesMonitor;</div><div class="line"><a name="l00048"></a><span class="lineno"> 48</span>&nbsp;<span class="keyword">class </span><a class="code" href="class_i_database_snapshot.html">IDatabaseSnapshot</a>;</div><div class="line"><a name="l00058"></a><span class="lineno"><a class="code" href="class_i_data_base.html"> 58</a></span>&nbsp;<span class="keyword">class </span><a class="code" href="class_i_data_base.html">IDataBase</a></div><div class="line"><a name="l00059"></a><span class="lineno"> 59</span>&nbsp;{</div><div class="line"><a name="l00060"></a><span class="lineno"> 60</span>&nbsp;<span class="keyword">public</span>:</div><div class="line"><a name="l00064"></a><span class="lineno"><a class="code" href="class_i_data_base.html#aff1acdd6cb7794ef2e04d7526e08558f"> 64</a></span>&nbsp; <span class="keyword">virtual</span> <a class="code" href="class_i_data_base.html#aff1acdd6cb7794ef2e04d7526e08558f">~IDataBase</a>() {};</div><div class="line"><a name="l00065"></a><span class="lineno"> 65</span>&nbsp; </div><div class="line"><a name="l00067"></a><span class="lineno"><a class="code" href="class_i_data_base.html#aeb5462fe60d1a1f2f36bd014a0514510"> 67</a></span>&nbsp; <span class="keyword">typedef</span> <span class="keyword">enum</span></div><div class="line"><a name="l00068"></a><span class="lineno"> 68</span>&nbsp; {</div><div class="line"><a name="l00070"></a><span class="lineno"><a class="code" href="class_i_data_base.html#aeb5462fe60d1a1f2f36bd014a0514510af21dc0bfcf9ad4b2c3169f53de1f35d4"> 70</a></span>&nbsp; <a class="code" href="class_i_data_base.html#aeb5462fe60d1a1f2f36bd014a0514510af21dc0bfcf9ad4b2c3169f53de1f35d4">kNoError</a> = 0,</div><div class="line"><a name="l00072"></a><span class="lineno"><a class="code" href="class_i_data_base.html#aeb5462fe60d1a1f2f36bd014a0514510ad361fb4d3d279319c7662e322510f4d3"> 72</a></span>&nbsp; <a class="code" href="class_i_data_base.html#aeb5462fe60d1a1f2f36bd014a0514510ad361fb4d3d279319c7662e322510f4d3">kUserCanceled</a>,</div><div class="line"><a name="l00074"></a><span class="lineno"><a class="code" href="class_i_data_base.html#aeb5462fe60d1a1f2f36bd014a0514510af842ad75d63bc30775114d8e7013aba3"> 74</a></span>&nbsp; <a class="code" href="class_i_data_base.html#aeb5462fe60d1a1f2f36bd014a0514510af842ad75d63bc30775114d8e7013aba3">kUnknownError</a>,</div><div class="line"><a name="l00076"></a><span class="lineno"><a class="code" href="class_i_data_base.html#aeb5462fe60d1a1f2f36bd014a0514510a3473a5cac5f7a8bb51538f0b4b8c9ca9"> 76</a></span>&nbsp; <a class="code" href="class_i_data_base.html#aeb5462fe60d1a1f2f36bd014a0514510a3473a5cac5f7a8bb51538f0b4b8c9ca9">kLowMemoryError</a>,</div><div class="line"><a name="l00078"></a><span class="lineno"><a class="code" href="class_i_data_base.html#aeb5462fe60d1a1f2f36bd014a0514510a78dae7dcb686f98d1b934d506c7d9abb"> 78</a></span>&nbsp; <a class="code" href="class_i_data_base.html#aeb5462fe60d1a1f2f36bd014a0514510a78dae7dcb686f98d1b934d506c7d9abb">kFileDamagedError</a>, <span class="comment">// file may be recoverable</span></div><div class="line"><a name="l00080"></a><span class="lineno"><a class="code" href="class_i_data_base.html#aeb5462fe60d1a1f2f36bd014a0514510a3aa86625bb7f34c3dc06d6143e42ed32"> 80</a></span>&nbsp;<span class="comment"></span> <a class="code" href="class_i_data_base.html#aeb5462fe60d1a1f2f36bd014a0514510a3aa86625bb7f34c3dc06d6143e42ed32">kFileCorruptError</a>, <span class="comment">// file is not recoverable</span></div><div class="line"><a name="l00082"></a><span class="lineno"><a class="code" href="class_i_data_base.html#aeb5462fe60d1a1f2f36bd014a0514510adebec6ede2ab6021983b73f069ce092d"> 82</a></span>&nbsp;<span class="comment"></span> <a class="code" href="class_i_data_base.html#aeb5462fe60d1a1f2f36bd014a0514510adebec6ede2ab6021983b73f069ce092d">kFileNotFoundError</a>,</div><div class="line"><a name="l00084"></a><span class="lineno"><a class="code" href="class_i_data_base.html#aeb5462fe60d1a1f2f36bd014a0514510a22d38c6c8aefabf01378053ae9a8b3fa"> 84</a></span>&nbsp; <a class="code" href="class_i_data_base.html#aeb5462fe60d1a1f2f36bd014a0514510a22d38c6c8aefabf01378053ae9a8b3fa">kFileIsOpenError</a>,</div><div class="line"><a name="l00086"></a><span class="lineno"><a class="code" href="class_i_data_base.html#aeb5462fe60d1a1f2f36bd014a0514510ae0483c6cf756a185237df06f5220a78b"> 86</a></span>&nbsp; <a class="code" href="class_i_data_base.html#aeb5462fe60d1a1f2f36bd014a0514510ae0483c6cf756a185237df06f5220a78b">kFileIsReadOnlyError</a>,</div><div class="line"><a name="l00088"></a><span class="lineno"><a class="code" href="class_i_data_base.html#aeb5462fe60d1a1f2f36bd014a0514510ac5b8d8ce58492973e1c29a39d8c5ad34"> 88</a></span>&nbsp; <a class="code" href="class_i_data_base.html#aeb5462fe60d1a1f2f36bd014a0514510ac5b8d8ce58492973e1c29a39d8c5ad34">kDiskFullError</a>,</div><div class="line"><a name="l00090"></a><span class="lineno"><a class="code" href="class_i_data_base.html#aeb5462fe60d1a1f2f36bd014a0514510aeabd7b1dfa381ea17f008dfa8139f777"> 90</a></span>&nbsp; <a class="code" href="class_i_data_base.html#aeb5462fe60d1a1f2f36bd014a0514510aeabd7b1dfa381ea17f008dfa8139f777">kNotFoundError</a>,</div><div class="line"><a name="l00092"></a><span class="lineno"><a class="code" href="class_i_data_base.html#aeb5462fe60d1a1f2f36bd014a0514510a307671d7118ffc3cf07460de1e356b99"> 92</a></span>&nbsp; <a class="code" href="class_i_data_base.html#aeb5462fe60d1a1f2f36bd014a0514510a307671d7118ffc3cf07460de1e356b99">kFileChangedError</a>,</div><div class="line"><a name="l00094"></a><span class="lineno"><a class="code" href="class_i_data_base.html#aeb5462fe60d1a1f2f36bd014a0514510aabff161c31d2ce2229b9e80d06503562"> 94</a></span>&nbsp; <a class="code" href="class_i_data_base.html#aeb5462fe60d1a1f2f36bd014a0514510aabff161c31d2ce2229b9e80d06503562">kWrongVersionError</a>,</div><div class="line"><a name="l00096"></a><span class="lineno"><a class="code" href="class_i_data_base.html#aeb5462fe60d1a1f2f36bd014a0514510aec1abffbdf96338cffff1c375d25cd09"> 96</a></span>&nbsp; <a class="code" href="class_i_data_base.html#aeb5462fe60d1a1f2f36bd014a0514510aec1abffbdf96338cffff1c375d25cd09">kFileIsNotOpenError</a>,</div><div class="line"><a name="l00098"></a><span class="lineno"><a class="code" href="class_i_data_base.html#aeb5462fe60d1a1f2f36bd014a0514510a35ae0a9586608c5390cf15ba1307ed87"> 98</a></span>&nbsp; <a class="code" href="class_i_data_base.html#aeb5462fe60d1a1f2f36bd014a0514510a35ae0a9586608c5390cf15ba1307ed87">kInvalidFileFormatError</a>,</div><div class="line"><a name="l00100"></a><span class="lineno"><a class="code" href="class_i_data_base.html#aeb5462fe60d1a1f2f36bd014a0514510a96816b0f49e86f26cddff67c2f3daa96"> 100</a></span>&nbsp; <a class="code" href="class_i_data_base.html#aeb5462fe60d1a1f2f36bd014a0514510a96816b0f49e86f26cddff67c2f3daa96">kTooManyFilesError</a>,</div><div class="line"><a name="l00102"></a><span class="lineno"><a class="code" href="class_i_data_base.html#aeb5462fe60d1a1f2f36bd014a0514510a51fb5afe84776396d792cf8f59045d09"> 102</a></span>&nbsp; <a class="code" href="class_i_data_base.html#aeb5462fe60d1a1f2f36bd014a0514510a51fb5afe84776396d792cf8f59045d09">kOutstandingClonesSaveError</a>,</div><div class="line"><a name="l00104"></a><span class="lineno"><a class="code" href="class_i_data_base.html#aeb5462fe60d1a1f2f36bd014a0514510a00bee514f0ce44647e249d1df36ba741"> 104</a></span>&nbsp; <a class="code" href="class_i_data_base.html#aeb5462fe60d1a1f2f36bd014a0514510a00bee514f0ce44647e249d1df36ba741">kOutstandingTransactionsSaveError</a>,</div><div class="line"><a name="l00106"></a><span class="lineno"><a class="code" href="class_i_data_base.html#aeb5462fe60d1a1f2f36bd014a0514510adc1a4dd4f8f89f273f2d7384a0c4d785"> 106</a></span>&nbsp; <a class="code" href="class_i_data_base.html#aeb5462fe60d1a1f2f36bd014a0514510adc1a4dd4f8f89f273f2d7384a0c4d785">kDBMergeFailed</a>,</div><div class="line"><a name="l00108"></a><span class="lineno"><a class="code" href="class_i_data_base.html#aeb5462fe60d1a1f2f36bd014a0514510a70af50ba9d6e816df2ceee179f3d7081"> 108</a></span>&nbsp; <a class="code" href="class_i_data_base.html#aeb5462fe60d1a1f2f36bd014a0514510a70af50ba9d6e816df2ceee179f3d7081">kDBModeSwitchFailed</a></div><div class="line"><a name="l00109"></a><span class="lineno"> 109</span>&nbsp; } <a class="code" href="class_i_data_base.html#aeb5462fe60d1a1f2f36bd014a0514510">DBResultCode</a>;</div><div class="line"><a name="l00110"></a><span class="lineno"> 110</span>&nbsp;</div><div class="line"><a name="l00111"></a><span class="lineno"> 111</span>&nbsp; <span class="keyword">typedef</span> <span class="keyword">enum</span> {</div><div class="line"><a name="l00112"></a><span class="lineno"> 112</span>&nbsp; kUnUknownMode,</div><div class="line"><a name="l00113"></a><span class="lineno"> 113</span>&nbsp; <span class="comment">/* File opened using Pre trans master page */</span></div><div class="line"><a name="l00114"></a><span class="lineno"> 114</span>&nbsp; kOpenTriedUsingPreTransMasterPage,</div><div class="line"><a name="l00115"></a><span class="lineno"> 115</span>&nbsp; <span class="comment">/*File opened using LPM CoWP page*/</span></div><div class="line"><a name="l00116"></a><span class="lineno"> 116</span>&nbsp; kOpenTriedUsingLPMCowPPage</div><div class="line"><a name="l00117"></a><span class="lineno"> 117</span>&nbsp; } FileRecoveryMode;</div><div class="line"><a name="l00118"></a><span class="lineno"> 118</span>&nbsp; </div><div class="line"><a name="l00119"></a><span class="lineno"> 119</span>&nbsp; <span class="comment">//------------------------------------------------------------------------------------</span></div><div class="line"><a name="l00120"></a><span class="lineno"> 120</span>&nbsp; <span class="comment">// Objects &amp; UIDS</span></div><div class="line"><a name="l00121"></a><span class="lineno"> 121</span>&nbsp; <span class="comment">//</span></div><div class="line"><a name="l00122"></a><span class="lineno"> 122</span>&nbsp; <span class="comment">// Create, Instantiate and delete objects in the database.</span></div><div class="line"><a name="l00123"></a><span class="lineno"> 123</span>&nbsp; <span class="comment">//------------------------------------------------------------------------------------</span></div><div class="line"><a name="l00124"></a><span class="lineno"> 124</span>&nbsp; </div><div class="line"><a name="l00130"></a><span class="lineno"> 130</span>&nbsp; <span class="keyword">virtual</span> <a class="code" href="class_i_d_type.html">UID</a> <a class="code" href="class_i_data_base.html#a7b9090fdc18c31c3e46310c2aa06be5a">NewUID</a>(<a class="code" href="class_i_d_type.html">ClassID</a> clsID) = 0;</div><div class="line"><a name="l00138"></a><span class="lineno"> 138</span>&nbsp; <span class="keyword">virtual</span> <a class="code" href="class_i_data_base.html#aeb5462fe60d1a1f2f36bd014a0514510">DBResultCode</a> <a class="code" href="class_i_data_base.html#add3849bdb55de533c806467ff75c088a">DeleteUID</a>(<a class="code" href="class_i_d_type.html">UID</a> <span class="keywordtype">id</span>) = 0;</div><div class="line"><a name="l00146"></a><span class="lineno"> 146</span>&nbsp; <span class="keyword">virtual</span> <a class="code" href="class_i_data_base.html#aeb5462fe60d1a1f2f36bd014a0514510">DBResultCode</a> <a class="code" href="class_i_data_base.html#a331b27871134f21b6a54e2181f4703a2">UndeleteUID</a>(<a class="code" href="class_i_d_type.html">UID</a> <span class="keywordtype">id</span>, <a class="code" href="class_i_d_type.html">ClassID</a> clsID) = 0;</div><div class="line"><a name="l00153"></a><span class="lineno"> 153</span>&nbsp; <span class="keyword">virtual</span> <a class="code" href="class_i_data_base.html#aeb5462fe60d1a1f2f36bd014a0514510">DBResultCode</a> <a class="code" href="class_i_data_base.html#a0ed904dadda5226ee7399f950bda2b4f">DestroyDeletedUID</a>(<a class="code" href="class_i_d_type.html">UID</a> <span class="keywordtype">id</span>) = 0;</div><div class="line"><a name="l00154"></a><span class="lineno"> 154</span>&nbsp; </div><div class="line"><a name="l00165"></a><span class="lineno"> 165</span>&nbsp; <span class="keyword">virtual</span> <a class="code" href="class_i_p_m_unknown.html">IPMUnknown</a> *<a class="code" href="class_i_data_base.html#aec63057065182a4dc0f7e0ec591d8175">Instantiate</a>(<a class="code" href="class_i_d_type.html">UID</a> <span class="keywordtype">id</span>, <a class="code" href="class_i_d_type.html">PMIID</a> interfaceID) = 0;</div><div class="line"><a name="l00166"></a><span class="lineno"> 166</span>&nbsp;</div><div class="line"><a name="l00174"></a><span class="lineno"> 174</span>&nbsp; <span class="keyword">virtual</span> <a class="code" href="class_i_p_m_unknown.html">IPMUnknown</a> *<a class="code" href="class_i_data_base.html#af16d78ba111673a6d7d282f5553011b2">QueryInstance</a>(<a class="code" href="class_i_d_type.html">UID</a> <span class="keywordtype">id</span>, <a class="code" href="class_i_d_type.html">PMIID</a> interfaceID) = 0;</div><div class="line"><a name="l00175"></a><span class="lineno"> 175</span>&nbsp; </div><div class="line"><a name="l00183"></a><span class="lineno"> 183</span>&nbsp; <span class="keyword">virtual</span> bool8 <a class="code" href="class_i_data_base.html#a96e19add638d3e1cdad242e7245e635d">IsValidUID</a>(<a class="code" href="class_i_d_type.html">UID</a> <span class="keywordtype">id</span>) <span class="keyword">const</span> = 0;</div><div class="line"><a name="l00184"></a><span class="lineno"> 184</span>&nbsp; </div><div class="line"><a name="l00189"></a><span class="lineno"> 189</span>&nbsp; <span class="keyword">virtual</span> <a class="code" href="class_i_d_type.html">UID</a> <a class="code" href="class_i_data_base.html#a7fe2aa8e012510c2dfe26c8427ce5b5a">GetRootUID</a>() <span class="keyword">const</span> = 0;</div><div class="line"><a name="l00195"></a><span class="lineno"> 195</span>&nbsp; <span class="keyword">virtual</span> <a class="code" href="class_i_d_type.html">ClassID</a> <a class="code" href="class_i_data_base.html#a94b756c55f9aa969a9c820e9bb26df45">GetClass</a>(<a class="code" href="class_i_d_type.html">UID</a> <span class="keywordtype">id</span>) <span class="keyword">const</span> = 0; </div><div class="line"><a name="l00196"></a><span class="lineno"> 196</span>&nbsp;</div><div class="line"><a name="l00203"></a><span class="lineno"> 203</span>&nbsp; <span class="keyword">virtual</span> <a class="code" href="class_i_u_i_d_iterator.html">IUIDIterator</a> *<a class="code" href="class_i_data_base.html#a382d9e8f1477d47a6b9a4b1e469c9354">NewUIDIterator</a>(bool8 includeDeletedUIDs = kFalse) <span class="keyword">const</span> = 0;</div><div class="line"><a name="l00208"></a><span class="lineno"> 208</span>&nbsp; <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_i_data_base.html#ac09e3ce51057ede9a99e4a709188249e">DeleteUIDIterator</a>(<a class="code" href="class_i_u_i_d_iterator.html">IUIDIterator</a> **iterator) <span class="keyword">const</span> = 0;</div><div class="line"><a name="l00209"></a><span class="lineno"> 209</span>&nbsp; </div><div class="line"><a name="l00211"></a><span class="lineno"> 211</span>&nbsp; <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_i_data_base.html#a1b70cdf8ba54a8836e8f7fa5aaff5530">AssertOnModification</a> () = 0; <span class="comment">// Asserts if the database has been modified used to assert if the database is being dirtied on saveing.</span></div><div class="line"><a name="l00212"></a><span class="lineno"> 212</span>&nbsp; </div><div class="line"><a name="l00213"></a><span class="lineno"> 213</span>&nbsp; <span class="comment">//------------------------------------------------------------------------------------</span></div><div class="line"><a name="l00214"></a><span class="lineno"> 214</span>&nbsp; <span class="comment">// DataBaseObservers</span></div><div class="line"><a name="l00215"></a><span class="lineno"> 215</span>&nbsp; <span class="comment">//</span></div><div class="line"><a name="l00216"></a><span class="lineno"> 216</span>&nbsp; <span class="comment">// DataBaseObservers are notified for modification actions to UIDs.</span></div><div class="line"><a name="l00217"></a><span class="lineno"> 217</span>&nbsp; <span class="comment">// See IDataBaseObserver.h</span></div><div class="line"><a name="l00218"></a><span class="lineno"> 218</span>&nbsp; <span class="comment">//------------------------------------------------------------------------------------</span></div><div class="line"><a name="l00219"></a><span class="lineno"> 219</span>&nbsp;</div><div class="line"><a name="l00224"></a><span class="lineno"> 224</span>&nbsp; <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_i_data_base.html#a45cddefd1b0e01bb2c453e6c71d483b0">AttachDataObserver</a>(<a class="code" href="class_i_database_observer.html">IDatabaseObserver</a>* observer) = 0;</div><div class="line"><a name="l00229"></a><span class="lineno"> 229</span>&nbsp; <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_i_data_base.html#afbcd1e34bb2cca80f3e83977f8de9979">DetachDataObserver</a>(<a class="code" href="class_i_database_observer.html">IDatabaseObserver</a>* observer) = 0;</div><div class="line"><a name="l00230"></a><span class="lineno"> 230</span>&nbsp;</div><div class="line"><a name="l00231"></a><span class="lineno"> 231</span>&nbsp; </div><div class="line"><a name="l00232"></a><span class="lineno"> 232</span>&nbsp; </div><div class="line"><a name="l00233"></a><span class="lineno"> 233</span>&nbsp; <span class="comment">//--------------------------------------------------------------------------------------</span></div><div class="line"><a name="l00234"></a><span class="lineno"> 234</span>&nbsp; <span class="comment">// DataBase File Info</span></div><div class="line"><a name="l00235"></a><span class="lineno"> 235</span>&nbsp; <span class="comment">//-------------------------------------------------------------------------------------</span></div><div class="line"><a name="l00236"></a><span class="lineno"> 236</span>&nbsp; </div><div class="line"><a name="l00238"></a><span class="lineno"><a class="code" href="class_i_data_base.html#a6a7ea5be7b95880d4415e4eb1288ea2e"> 238</a></span>&nbsp; <span class="keyword">typedef</span> <span class="keyword">enum</span></div><div class="line"><a name="l00239"></a><span class="lineno"> 239</span>&nbsp; {</div><div class="line"><a name="l00241"></a><span class="lineno"><a class="code" href="class_i_data_base.html#a6a7ea5be7b95880d4415e4eb1288ea2eaee2b1ea321dbea2da0cb33fab31d3216"> 241</a></span>&nbsp; <a class="code" href="class_i_data_base.html#a6a7ea5be7b95880d4415e4eb1288ea2eaee2b1ea321dbea2da0cb33fab31d3216">kSwapUnknown</a> = 0,</div><div class="line"><a name="l00243"></a><span class="lineno"><a class="code" href="class_i_data_base.html#a6a7ea5be7b95880d4415e4eb1288ea2ea67c13e9b8f5077041b2b9f61958498ec"> 243</a></span>&nbsp; <a class="code" href="class_i_data_base.html#a6a7ea5be7b95880d4415e4eb1288ea2ea67c13e9b8f5077041b2b9f61958498ec">kIntelOrder</a>, </div><div class="line"><a name="l00245"></a><span class="lineno"><a class="code" href="class_i_data_base.html#a6a7ea5be7b95880d4415e4eb1288ea2ea5c87deedc07f4adce1612c0a2f6479c9"> 245</a></span>&nbsp; <a class="code" href="class_i_data_base.html#a6a7ea5be7b95880d4415e4eb1288ea2ea5c87deedc07f4adce1612c0a2f6479c9">kMotorolaOrder</a></div><div class="line"><a name="l00246"></a><span class="lineno"> 246</span>&nbsp; } <a class="code" href="class_i_data_base.html#a6a7ea5be7b95880d4415e4eb1288ea2e">ByteSwapOrder</a>;</div><div class="line"><a name="l00247"></a><span class="lineno"> 247</span>&nbsp; </div><div class="line"><a name="l00251"></a><span class="lineno"> 251</span>&nbsp; <span class="keyword">virtual</span> uint32 <a class="code" href="class_i_data_base.html#ad8df29208b4ad61ba3d3b05e84ab804d">GetSaveCount</a>() <span class="keyword">const</span> = 0;</div><div class="line"><a name="l00255"></a><span class="lineno"> 255</span>&nbsp; <span class="keyword">virtual</span> bool16 <a class="code" href="class_i_data_base.html#ac7b7bb37af68e44de17daafd20ce8065">IsReadOnly</a>() <span class="keyword">const</span> = 0;</div><div class="line"><a name="l00259"></a><span class="lineno"> 259</span>&nbsp; <span class="keyword">virtual</span> bool16 <a class="code" href="class_i_data_base.html#a498bfdaf8db5a323648ba31bfd17ba2a">IsModified</a>() <span class="keyword">const</span> = 0;</div><div class="line"><a name="l00260"></a><span class="lineno"> 260</span>&nbsp; <span class="comment">// Sets the version number of the application that was used</span></div><div class="line"><a name="l00261"></a><span class="lineno"> 261</span>&nbsp; <span class="comment">// to create the database. INTERNAL USE ONLY</span></div><div class="line"><a name="l00262"></a><span class="lineno"> 262</span>&nbsp; <span class="keyword">virtual</span> <a class="code" href="class_i_data_base.html#aeb5462fe60d1a1f2f36bd014a0514510">IDataBase::DBResultCode</a> SetVersionNumber(<span class="keyword">const</span> int32&amp; majorVersion, <span class="keyword">const</span> int32&amp; minorVersion) = 0;</div><div class="line"><a name="l00268"></a><span class="lineno"> 268</span>&nbsp; <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_i_data_base.html#ab875076bb09f4a9bd47052f44b2dfcd4">GetVersionNumber</a>(int32 *majorVersion, int32 *minorVersion) <span class="keyword">const</span> = 0;</div><div class="line"><a name="l00272"></a><span class="lineno"> 272</span>&nbsp; <span class="keyword">virtual</span> <a class="code" href="class_i_data_base.html#a6a7ea5be7b95880d4415e4eb1288ea2e">ByteSwapOrder</a> <a class="code" href="class_i_data_base.html#a4dc45cc7a66600ae9d8f44bb721fa7ff">GetByteSwap</a>() <span class="keyword">const</span> = 0; </div><div class="line"><a name="l00277"></a><span class="lineno"> 277</span>&nbsp; <span class="keyword">virtual</span> <span class="keyword">const</span> <a class="code" href="class_i_d_file.html">IDFile</a>* <a class="code" href="class_i_data_base.html#aa0bb1cef90bee550aa97dbc6f7d78777">GetSysFile</a>() <span class="keyword">const</span> = 0;</div><div class="line"><a name="l00278"></a><span class="lineno"> 278</span>&nbsp; </div><div class="line"><a name="l00279"></a><span class="lineno"> 279</span>&nbsp; </div><div class="line"><a name="l00280"></a><span class="lineno"> 280</span>&nbsp; <span class="comment">//------------------------------------------------------------------------------------</span></div><div class="line"><a name="l00281"></a><span class="lineno"> 281</span>&nbsp; <span class="comment">// DataBase File Handling</span></div><div class="line"><a name="l00282"></a><span class="lineno"> 282</span>&nbsp; <span class="comment">//------------------------------------------------------------------------------------</span></div><div class="line"><a name="l00283"></a><span class="lineno"> 283</span>&nbsp; </div><div class="line"><a name="l00285"></a><span class="lineno"><a class="code" href="class_i_data_base.html#a9dbb56ce3d7e855224035880a8a8599e"> 285</a></span>&nbsp; <span class="keyword">typedef</span> <span class="keyword">enum</span></div><div class="line"><a name="l00286"></a><span class="lineno"> 286</span>&nbsp; {</div><div class="line"><a name="l00288"></a><span class="lineno"><a class="code" href="class_i_data_base.html#a9dbb56ce3d7e855224035880a8a8599ea8765e52dc14c3f2789349ca7346eec41"> 288</a></span>&nbsp; <a class="code" href="class_i_data_base.html#a9dbb56ce3d7e855224035880a8a8599ea8765e52dc14c3f2789349ca7346eec41">kRead</a>,</div><div class="line"><a name="l00290"></a><span class="lineno"><a class="code" href="class_i_data_base.html#a9dbb56ce3d7e855224035880a8a8599ea3a9d23bc4ba5b89f8eedc379b7207f57"> 290</a></span>&nbsp; <a class="code" href="class_i_data_base.html#a9dbb56ce3d7e855224035880a8a8599ea3a9d23bc4ba5b89f8eedc379b7207f57">kWrite</a>,</div><div class="line"><a name="l00293"></a><span class="lineno"><a class="code" href="class_i_data_base.html#a9dbb56ce3d7e855224035880a8a8599eaf0baccc69a42bbe205ff0aa989838c83"> 293</a></span>&nbsp; <a class="code" href="class_i_data_base.html#a9dbb56ce3d7e855224035880a8a8599eaf0baccc69a42bbe205ff0aa989838c83">kCopy</a></div><div class="line"><a name="l00294"></a><span class="lineno"> 294</span>&nbsp; } <a class="code" href="class_i_data_base.html#a9dbb56ce3d7e855224035880a8a8599e">OpenFlags</a>;</div><div class="line"><a name="l00295"></a><span class="lineno"> 295</span>&nbsp; </div><div class="line"><a name="l00297"></a><span class="lineno"><a class="code" href="class_i_data_base.html#a26276d334ab6260b77c52289154f1560"> 297</a></span>&nbsp; <span class="keyword">typedef</span> <span class="keyword">enum</span></div><div class="line"><a name="l00298"></a><span class="lineno"> 298</span>&nbsp; {</div><div class="line"><a name="l00300"></a><span class="lineno"><a class="code" href="class_i_data_base.html#a26276d334ab6260b77c52289154f1560a23dce616bd8058f70a0a5af4a4290deb"> 300</a></span>&nbsp; <a class="code" href="class_i_data_base.html#a26276d334ab6260b77c52289154f1560a23dce616bd8058f70a0a5af4a4290deb">kSaveAs</a>,</div><div class="line"><a name="l00302"></a><span class="lineno"><a class="code" href="class_i_data_base.html#a26276d334ab6260b77c52289154f1560a1ca16c7a70961918884179fd3e863401"> 302</a></span>&nbsp; <a class="code" href="class_i_data_base.html#a26276d334ab6260b77c52289154f1560a1ca16c7a70961918884179fd3e863401">kSaveACopy</a></div><div class="line"><a name="l00303"></a><span class="lineno"> 303</span>&nbsp; } <a class="code" href="class_i_data_base.html#a26276d334ab6260b77c52289154f1560">SaveFlags</a>;</div><div class="line"><a name="l00304"></a><span class="lineno"> 304</span>&nbsp; </div><div class="line"><a name="l00309"></a><span class="lineno"><a class="code" href="class_i_data_base.html#a7c32e77fc00337524a64e92c6160d81e"> 309</a></span>&nbsp; <span class="keyword">typedef</span> <span class="keyword">enum</span></div><div class="line"><a name="l00310"></a><span class="lineno"> 310</span>&nbsp; {</div><div class="line"><a name="l00315"></a><span class="lineno"><a class="code" href="class_i_data_base.html#a7c32e77fc00337524a64e92c6160d81ea6eb1b6197e3ea6728465ffd813d8d6d6"> 315</a></span>&nbsp; <a class="code" href="class_i_data_base.html#a7c32e77fc00337524a64e92c6160d81ea6eb1b6197e3ea6728465ffd813d8d6d6">kDeleteAfterUse</a> = -1,</div><div class="line"><a name="l00321"></a><span class="lineno"><a class="code" href="class_i_data_base.html#a7c32e77fc00337524a64e92c6160d81ead4a6f3399529f16e48d3ab0c84cb5800"> 321</a></span>&nbsp; <a class="code" href="class_i_data_base.html#a7c32e77fc00337524a64e92c6160d81ead4a6f3399529f16e48d3ab0c84cb5800">kNoProtection</a> = 0, </div><div class="line"><a name="l00327"></a><span class="lineno"><a class="code" href="class_i_data_base.html#a7c32e77fc00337524a64e92c6160d81ea39f982995f3fffd34d2fdec6a99c9bc1"> 327</a></span>&nbsp; <a class="code" href="class_i_data_base.html#a7c32e77fc00337524a64e92c6160d81ea39f982995f3fffd34d2fdec6a99c9bc1">kProtectSave</a>, </div><div class="line"><a name="l00332"></a><span class="lineno"><a class="code" href="class_i_data_base.html#a7c32e77fc00337524a64e92c6160d81eafbec3b9a89b985cab49b60fb9a163341"> 332</a></span>&nbsp; <a class="code" href="class_i_data_base.html#a7c32e77fc00337524a64e92c6160d81eafbec3b9a89b985cab49b60fb9a163341">kProtectMiniSave</a></div><div class="line"><a name="l00333"></a><span class="lineno"> 333</span>&nbsp; } <a class="code" href="class_i_data_base.html#a7c32e77fc00337524a64e92c6160d81e">ProtectionLevel</a>;</div><div class="line"><a name="l00334"></a><span class="lineno"> 334</span>&nbsp; </div><div class="line"><a name="l00340"></a><span class="lineno"><a class="code" href="class_i_data_base.html#a25222b99a91cba57c85e822eeeca2e5b"> 340</a></span>&nbsp; <span class="keyword">typedef</span> <a class="code" href="class_i_data_base.html#aeb5462fe60d1a1f2f36bd014a0514510">DBResultCode</a> (*<a class="code" href="class_i_data_base.html#a25222b99a91cba57c85e822eeeca2e5b">DBProgressFunction</a>)(int32 stepsDone, int32 stepCount);</div><div class="line"><a name="l00341"></a><span class="lineno"> 341</span>&nbsp;</div><div class="line"><a name="l00346"></a><span class="lineno"> 346</span>&nbsp; <span class="keyword">virtual</span> <a class="code" href="class_i_data_base.html#aeb5462fe60d1a1f2f36bd014a0514510">DBResultCode</a> <a class="code" href="class_i_data_base.html#a59cbc3a19ff7cbf8c8acff0d69803be9">New</a>(<a class="code" href="class_i_data_base.html#a7c32e77fc00337524a64e92c6160d81e">ProtectionLevel</a> protLevel) = 0;</div><div class="line"><a name="l00353"></a><span class="lineno"> 353</span>&nbsp; <span class="keyword">virtual</span> <a class="code" href="class_i_data_base.html#aeb5462fe60d1a1f2f36bd014a0514510">DBResultCode</a> <a class="code" href="class_i_data_base.html#a03040e64d432923e9f73ab016e80b33e">Open</a>(<span class="keyword">const</span> <a class="code" href="class_i_d_file.html">IDFile</a>&amp; whatFile, <a class="code" href="class_i_data_base.html#a7c32e77fc00337524a64e92c6160d81e">ProtectionLevel</a> protLevel,</div><div class="line"><a name="l00354"></a><span class="lineno"> 354</span>&nbsp; <a class="code" href="class_i_data_base.html#a9dbb56ce3d7e855224035880a8a8599e">OpenFlags</a> openFlag = <a class="code" href="class_i_data_base.html#a9dbb56ce3d7e855224035880a8a8599ea3a9d23bc4ba5b89f8eedc379b7207f57">kWrite</a>) = 0;</div><div class="line"><a name="l00359"></a><span class="lineno"> 359</span>&nbsp; <span class="keyword">virtual</span> <a class="code" href="class_i_data_base.html#aeb5462fe60d1a1f2f36bd014a0514510">DBResultCode</a> <a class="code" href="class_i_data_base.html#a69d77f0feafbd6d4c464765e1a7c29dc">Revert</a>() = 0;</div><div class="line"><a name="l00367"></a><span class="lineno"> 367</span>&nbsp; <span class="keyword">virtual</span> <a class="code" href="class_i_data_base.html#aeb5462fe60d1a1f2f36bd014a0514510">DBResultCode</a> <a class="code" href="class_i_data_base.html#aa70606b5f5ec6811713fd3052e4d1222">Recover</a>(<span class="keyword">const</span> <a class="code" href="class_i_d_file.html">IDFile</a>* damagedFile, <a class="code" href="class_i_data_base.html#a7c32e77fc00337524a64e92c6160d81e">ProtectionLevel</a> protLevel,</div><div class="line"><a name="l00368"></a><span class="lineno"> 368</span>&nbsp; <a class="code" href="class_i_data_base.html#a7c32e77fc00337524a64e92c6160d81e">ProtectionLevel</a> oldProtLevel, <span class="keyword">const</span> <a class="code" href="class_i_d_file.html">IDFile</a>* miniSaveFile = nil) = 0;</div><div class="line"><a name="l00369"></a><span class="lineno"> 369</span>&nbsp; </div><div class="line"><a name="l00374"></a><span class="lineno"> 374</span>&nbsp; <span class="keyword">virtual</span> <a class="code" href="class_i_data_base.html#aeb5462fe60d1a1f2f36bd014a0514510">DBResultCode</a> <a class="code" href="class_i_data_base.html#adda874f2a04541bcec45b07dd0bcb43c">Save</a>() = 0;</div><div class="line"><a name="l00380"></a><span class="lineno"> 380</span>&nbsp; <span class="keyword">virtual</span> <a class="code" href="class_i_data_base.html#aeb5462fe60d1a1f2f36bd014a0514510">DBResultCode</a> <a class="code" href="class_i_data_base.html#a104d99974fe66c911b91788918e0cee2">SaveAs</a>(<span class="keyword">const</span> <a class="code" href="class_i_d_file.html">IDFile</a>&amp; destFile,</div><div class="line"><a name="l00381"></a><span class="lineno"> 381</span>&nbsp; <a class="code" href="class_i_data_base.html#a26276d334ab6260b77c52289154f1560">SaveFlags</a> saveFlag = <a class="code" href="class_i_data_base.html#a26276d334ab6260b77c52289154f1560a23dce616bd8058f70a0a5af4a4290deb">kSaveAs</a>) = 0;</div><div class="line"><a name="l00382"></a><span class="lineno"> 382</span>&nbsp; </div><div class="line"><a name="l00387"></a><span class="lineno"> 387</span>&nbsp; <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_i_data_base.html#aee02931256912ce7cea5ae5d23db640f">SetModified</a>(bool16 modified) = 0;</div><div class="line"><a name="l00388"></a><span class="lineno"> 388</span>&nbsp;</div><div class="line"><a name="l00395"></a><span class="lineno"><a class="code" href="class_i_data_base_1_1_save_restore_modified_state.html"> 395</a></span>&nbsp; <span class="keyword">class </span><a class="code" href="class_i_data_base_1_1_save_restore_modified_state.html">SaveRestoreModifiedState</a></div><div class="line"><a name="l00396"></a><span class="lineno"> 396</span>&nbsp; {</div><div class="line"><a name="l00397"></a><span class="lineno"> 397</span>&nbsp; <span class="keyword">public</span>:</div><div class="line"><a name="l00398"></a><span class="lineno"> 398</span>&nbsp; <a class="code" href="class_i_data_base_1_1_save_restore_modified_state.html">SaveRestoreModifiedState</a>(<a class="code" href="class_i_data_base.html">IDataBase</a> * db)</div><div class="line"><a name="l00399"></a><span class="lineno"> 399</span>&nbsp; : fDB(db)</div><div class="line"><a name="l00400"></a><span class="lineno"> 400</span>&nbsp; {</div><div class="line"><a name="l00401"></a><span class="lineno"> 401</span>&nbsp; <span class="keywordflow">if</span> (db &amp;&amp; db-&gt;<a class="code" href="class_i_data_base.html#a498bfdaf8db5a323648ba31bfd17ba2a">IsModified</a>())</div><div class="line"><a name="l00402"></a><span class="lineno"> 402</span>&nbsp; fDB = nil; <span class="comment">// If the database is already modified we don&#39;t need to restore</span></div><div class="line"><a name="l00403"></a><span class="lineno"> 403</span>&nbsp; }</div><div class="line"><a name="l00404"></a><span class="lineno"> 404</span>&nbsp;</div><div class="line"><a name="l00405"></a><span class="lineno"> 405</span>&nbsp; ~<a class="code" href="class_i_data_base_1_1_save_restore_modified_state.html">SaveRestoreModifiedState</a>()</div><div class="line"><a name="l00406"></a><span class="lineno"> 406</span>&nbsp; {</div><div class="line"><a name="l00407"></a><span class="lineno"> 407</span>&nbsp; <span class="keywordflow">if</span> (fDB)</div><div class="line"><a name="l00408"></a><span class="lineno"> 408</span>&nbsp; fDB-&gt;<a class="code" href="class_i_data_base.html#aee02931256912ce7cea5ae5d23db640f">SetModified</a>(kFalse);</div><div class="line"><a name="l00409"></a><span class="lineno"> 409</span>&nbsp; }</div><div class="line"><a name="l00410"></a><span class="lineno"> 410</span>&nbsp; <span class="keyword">private</span>:</div><div class="line"><a name="l00411"></a><span class="lineno"> 411</span>&nbsp; <a class="code" href="class_i_data_base.html">IDataBase</a> * fDB;</div><div class="line"><a name="l00412"></a><span class="lineno"> 412</span>&nbsp; };</div><div class="line"><a name="l00413"></a><span class="lineno"> 413</span>&nbsp; </div><div class="line"><a name="l00419"></a><span class="lineno"> 419</span>&nbsp; <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_i_data_base.html#a0b2ebece00fdd0db11bf63d6e2cdaf39">SetPlatformFileInfo</a>(<span class="keywordtype">void</span> *fileInfo) = 0;</div><div class="line"><a name="l00420"></a><span class="lineno"> 420</span>&nbsp;</div><div class="line"><a name="l00424"></a><span class="lineno"> 424</span>&nbsp; <span class="keyword">virtual</span> <a class="code" href="class_i_data_base.html#a25222b99a91cba57c85e822eeeca2e5b">DBProgressFunction</a> <a class="code" href="class_i_data_base.html#a06b3f9ca664f286662c11c0786361292">SetProgressCallback</a>(<a class="code" href="class_i_data_base.html#a25222b99a91cba57c85e822eeeca2e5b">DBProgressFunction</a> callback) = 0;</div><div class="line"><a name="l00425"></a><span class="lineno"> 425</span>&nbsp; </div><div class="line"><a name="l00426"></a><span class="lineno"> 426</span>&nbsp; </div><div class="line"><a name="l00427"></a><span class="lineno"> 427</span>&nbsp; <span class="comment">//--------------------------------------------------------------------------------------</span></div><div class="line"><a name="l00428"></a><span class="lineno"> 428</span>&nbsp; <span class="comment">// Transactions &amp; Mini-Save</span></div><div class="line"><a name="l00429"></a><span class="lineno"> 429</span>&nbsp; <span class="comment">//</span></div><div class="line"><a name="l00430"></a><span class="lineno"> 430</span>&nbsp; <span class="comment">// All changes to the database must be encapsulated in a transaction.</span></div><div class="line"><a name="l00431"></a><span class="lineno"> 431</span>&nbsp; <span class="comment">// Nested transactions are possible.</span></div><div class="line"><a name="l00432"></a><span class="lineno"> 432</span>&nbsp; <span class="comment">//</span></div><div class="line"><a name="l00433"></a><span class="lineno"> 433</span>&nbsp; <span class="comment">// You usually do not have to call Begin/EndTransaction yourself.</span></div><div class="line"><a name="l00434"></a><span class="lineno"> 434</span>&nbsp; <span class="comment">//</span></div><div class="line"><a name="l00435"></a><span class="lineno"> 435</span>&nbsp; <span class="comment">// An assert regarding a database change outside of a transaction is usually </span></div><div class="line"><a name="l00436"></a><span class="lineno"> 436</span>&nbsp; <span class="comment">// caused by either a modification outside of a command, a command with</span></div><div class="line"><a name="l00437"></a><span class="lineno"> 437</span>&nbsp; <span class="comment">// an incorrect target, or a command that modifies more than one database.</span></div><div class="line"><a name="l00438"></a><span class="lineno"> 438</span>&nbsp; <span class="comment">//--------------------------------------------------------------------------------------</span></div><div class="line"><a name="l00439"></a><span class="lineno"> 439</span>&nbsp; </div><div class="line"><a name="l00451"></a><span class="lineno"> 451</span>&nbsp; <span class="keyword">virtual</span> <a class="code" href="class_i_data_base.html#aeb5462fe60d1a1f2f36bd014a0514510">DBResultCode</a> <a class="code" href="class_i_data_base.html#abdd51fca6171c7fabed8447faedba55a">BeginTransaction</a>() = 0;</div><div class="line"><a name="l00456"></a><span class="lineno"> 456</span>&nbsp; <span class="keyword">virtual</span> <a class="code" href="class_i_data_base.html#aeb5462fe60d1a1f2f36bd014a0514510">DBResultCode</a> <a class="code" href="class_i_data_base.html#a9b4b2aa25eded1c7e6692ef719b663ac">EndTransaction</a>() = 0;</div><div class="line"><a name="l00457"></a><span class="lineno"> 457</span>&nbsp;</div><div class="line"><a name="l00461"></a><span class="lineno"> 461</span>&nbsp; <span class="keyword">virtual</span> int32 <a class="code" href="class_i_data_base.html#af4ac7da036bc066c63c2983a69d01822">GetTransactionLevel</a>() <span class="keyword">const</span> = 0;</div><div class="line"><a name="l00462"></a><span class="lineno"> 462</span>&nbsp;</div><div class="line"><a name="l00467"></a><span class="lineno"> 467</span>&nbsp; <span class="keyword">virtual</span> <a class="code" href="class_i_data_base.html#a7c32e77fc00337524a64e92c6160d81e">ProtectionLevel</a> <a class="code" href="class_i_data_base.html#ad8b85367d6ffe62091e8961b0a8ab547">GetProtectionLevel</a>() <span class="keyword">const</span> = 0;</div><div class="line"><a name="l00473"></a><span class="lineno"> 473</span>&nbsp; <span class="keyword">virtual</span> uint32 <a class="code" href="class_i_data_base.html#aa97c195eaa262226136167fa84ddabb3">SetMiniSaveInterval</a>(uint32 msecs) = 0;</div><div class="line"><a name="l00477"></a><span class="lineno"> 477</span>&nbsp; <span class="keyword">virtual</span> uint32 <a class="code" href="class_i_data_base.html#add11767b9ac775eb79957a28d76b880c">GetMiniSaveInterval</a>() <span class="keyword">const</span> = 0;</div><div class="line"><a name="l00478"></a><span class="lineno"> 478</span>&nbsp; </div><div class="line"><a name="l00482"></a><span class="lineno"> 482</span>&nbsp; <span class="keyword">virtual</span> <span class="keyword">const</span> <a class="code" href="class_i_d_file.html">IDFile</a>* <a class="code" href="class_i_data_base.html#af8fc96697ecd8225094ead4c88d2511e">GetMiniSaveFile</a>() <span class="keyword">const</span> = 0;</div><div class="line"><a name="l00483"></a><span class="lineno"> 483</span>&nbsp; </div><div class="line"><a name="l00484"></a><span class="lineno"> 484</span>&nbsp; </div><div class="line"><a name="l00485"></a><span class="lineno"> 485</span>&nbsp;</div><div class="line"><a name="l00486"></a><span class="lineno"> 486</span>&nbsp; <span class="comment">//--------------------------------------------------------------------------------------</span></div><div class="line"><a name="l00487"></a><span class="lineno"> 487</span>&nbsp; <span class="comment">// Error Handling</span></div><div class="line"><a name="l00488"></a><span class="lineno"> 488</span>&nbsp; <span class="comment">//</span></div><div class="line"><a name="l00489"></a><span class="lineno"> 489</span>&nbsp; <span class="comment">// The db stores the last error including some state information.</span></div><div class="line"><a name="l00490"></a><span class="lineno"> 490</span>&nbsp; <span class="comment">// It will ignore any subsequent error until its error state is cleared.</span></div><div class="line"><a name="l00491"></a><span class="lineno"> 491</span>&nbsp; <span class="comment">//--------------------------------------------------------------------------------------</span></div><div class="line"><a name="l00492"></a><span class="lineno"> 492</span>&nbsp; </div><div class="line"><a name="l00493"></a><span class="lineno"><a class="code" href="struct_i_data_base_1_1_data_file_error_data.html"> 493</a></span>&nbsp; <span class="keyword">struct </span><a class="code" href="struct_i_data_base_1_1_data_file_error_data.html">DataFileErrorData</a></div><div class="line"><a name="l00494"></a><span class="lineno"> 494</span>&nbsp; {</div><div class="line"><a name="l00495"></a><span class="lineno"> 495</span>&nbsp; <a class="code" href="class_p_m_string.html">PMString</a> fIdFilePath;</div><div class="line"><a name="l00496"></a><span class="lineno"> 496</span>&nbsp; <span class="keywordtype">char</span>* fDescription;</div><div class="line"><a name="l00497"></a><span class="lineno"> 497</span>&nbsp; <span class="keywordtype">size_t</span> fAllocatedStringLength;</div><div class="line"><a name="l00498"></a><span class="lineno"> 498</span>&nbsp; int32 fErrorCode; <span class="comment">// internal detail - refer to SUIDSErrorCode</span></div><div class="line"><a name="l00499"></a><span class="lineno"> 499</span>&nbsp; int32 fMajorVersionNumber;</div><div class="line"><a name="l00500"></a><span class="lineno"> 500</span>&nbsp; int32 fMinorVersionNumber;</div><div class="line"><a name="l00501"></a><span class="lineno"> 501</span>&nbsp; <span class="keywordtype">bool</span> fIsCastorBasedFile;</div><div class="line"><a name="l00502"></a><span class="lineno"> 502</span>&nbsp; </div><div class="line"><a name="l00503"></a><span class="lineno"> 503</span>&nbsp; <a class="code" href="struct_i_data_base_1_1_data_file_error_data.html">DataFileErrorData</a>() : fErrorCode(0), fMajorVersionNumber(0), fMinorVersionNumber(0), fIsCastorBasedFile(kFalse), fDescription(<span class="keyword">nullptr</span>), fAllocatedStringLength(0) {}</div><div class="line"><a name="l00504"></a><span class="lineno"> 504</span>&nbsp; </div><div class="line"><a name="l00505"></a><span class="lineno"> 505</span>&nbsp; <a class="code" href="struct_i_data_base_1_1_data_file_error_data.html">DataFileErrorData</a>(<span class="keyword">const</span> <a class="code" href="struct_i_data_base_1_1_data_file_error_data.html">DataFileErrorData</a>&amp; other) : fDescription(<span class="keyword">nullptr</span>)</div><div class="line"><a name="l00506"></a><span class="lineno"> 506</span>&nbsp; {</div><div class="line"><a name="l00507"></a><span class="lineno"> 507</span>&nbsp; CommonCopyAssignmentStuff(other);</div><div class="line"><a name="l00508"></a><span class="lineno"> 508</span>&nbsp; }</div><div class="line"><a name="l00509"></a><span class="lineno"> 509</span>&nbsp; </div><div class="line"><a name="l00510"></a><span class="lineno"> 510</span>&nbsp; <a class="code" href="struct_i_data_base_1_1_data_file_error_data.html">DataFileErrorData</a>&amp; operator=(<span class="keyword">const</span> <a class="code" href="struct_i_data_base_1_1_data_file_error_data.html">DataFileErrorData</a>&amp; other)</div><div class="line"><a name="l00511"></a><span class="lineno"> 511</span>&nbsp; {</div><div class="line"><a name="l00512"></a><span class="lineno"> 512</span>&nbsp; InternalClear();</div><div class="line"><a name="l00513"></a><span class="lineno"> 513</span>&nbsp; CommonCopyAssignmentStuff(other);</div><div class="line"><a name="l00514"></a><span class="lineno"> 514</span>&nbsp; <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div><div class="line"><a name="l00515"></a><span class="lineno"> 515</span>&nbsp; }</div><div class="line"><a name="l00516"></a><span class="lineno"> 516</span>&nbsp; </div><div class="line"><a name="l00517"></a><span class="lineno"> 517</span>&nbsp; ~<a class="code" href="struct_i_data_base_1_1_data_file_error_data.html">DataFileErrorData</a>()</div><div class="line"><a name="l00518"></a><span class="lineno"> 518</span>&nbsp; {</div><div class="line"><a name="l00519"></a><span class="lineno"> 519</span>&nbsp; InternalClear();</div><div class="line"><a name="l00520"></a><span class="lineno"> 520</span>&nbsp; }</div><div class="line"><a name="l00521"></a><span class="lineno"> 521</span>&nbsp;</div><div class="line"><a name="l00522"></a><span class="lineno"> 522</span>&nbsp; <span class="keyword">private</span>:</div><div class="line"><a name="l00523"></a><span class="lineno"> 523</span>&nbsp; <span class="keywordtype">void</span> InternalClear()</div><div class="line"><a name="l00524"></a><span class="lineno"> 524</span>&nbsp; {</div><div class="line"><a name="l00525"></a><span class="lineno"> 525</span>&nbsp; <span class="keywordflow">if</span> (fAllocatedStringLength &gt; 0 &amp;&amp; fDescription != <span class="keyword">nullptr</span>)</div><div class="line"><a name="l00526"></a><span class="lineno"> 526</span>&nbsp; {</div><div class="line"><a name="l00527"></a><span class="lineno"> 527</span>&nbsp; <span class="keyword">delete</span> fDescription;</div><div class="line"><a name="l00528"></a><span class="lineno"> 528</span>&nbsp; fAllocatedStringLength = 0;</div><div class="line"><a name="l00529"></a><span class="lineno"> 529</span>&nbsp; }</div><div class="line"><a name="l00530"></a><span class="lineno"> 530</span>&nbsp; fDescription = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00531"></a><span class="lineno"> 531</span>&nbsp; }</div><div class="line"><a name="l00532"></a><span class="lineno"> 532</span>&nbsp;</div><div class="line"><a name="l00533"></a><span class="lineno"> 533</span>&nbsp; <span class="keywordtype">void</span> CommonCopyAssignmentStuff(<span class="keyword">const</span> <a class="code" href="struct_i_data_base_1_1_data_file_error_data.html">DataFileErrorData</a>&amp; other)</div><div class="line"><a name="l00534"></a><span class="lineno"> 534</span>&nbsp; { </div><div class="line"><a name="l00535"></a><span class="lineno"> 535</span>&nbsp; fIdFilePath = other.fIdFilePath;</div><div class="line"><a name="l00536"></a><span class="lineno"> 536</span>&nbsp; fErrorCode = other.fErrorCode;</div><div class="line"><a name="l00537"></a><span class="lineno"> 537</span>&nbsp; fMajorVersionNumber = other.fMajorVersionNumber;</div><div class="line"><a name="l00538"></a><span class="lineno"> 538</span>&nbsp; fMinorVersionNumber = other.fMinorVersionNumber;</div><div class="line"><a name="l00539"></a><span class="lineno"> 539</span>&nbsp; fIsCastorBasedFile = other.fIsCastorBasedFile;</div><div class="line"><a name="l00540"></a><span class="lineno"> 540</span>&nbsp; fAllocatedStringLength = other.fAllocatedStringLength;</div><div class="line"><a name="l00541"></a><span class="lineno"> 541</span>&nbsp; </div><div class="line"><a name="l00542"></a><span class="lineno"> 542</span>&nbsp; <span class="keywordflow">if</span>(other.fAllocatedStringLength &gt; 0 &amp;&amp; other.fDescription != <span class="keyword">nullptr</span>)</div><div class="line"><a name="l00543"></a><span class="lineno"> 543</span>&nbsp; {</div><div class="line"><a name="l00544"></a><span class="lineno"> 544</span>&nbsp; fDescription = <span class="keyword">new</span> <span class="keywordtype">char</span>[fAllocatedStringLength];</div><div class="line"><a name="l00545"></a><span class="lineno"> 545</span>&nbsp; memcpy(fDescription, other.fDescription, fAllocatedStringLength);</div><div class="line"><a name="l00546"></a><span class="lineno"> 546</span>&nbsp; }</div><div class="line"><a name="l00547"></a><span class="lineno"> 547</span>&nbsp; <span class="keywordflow">else</span></div><div class="line"><a name="l00548"></a><span class="lineno"> 548</span>&nbsp; {</div><div class="line"><a name="l00549"></a><span class="lineno"> 549</span>&nbsp; fDescription = other.fDescription;</div><div class="line"><a name="l00550"></a><span class="lineno"> 550</span>&nbsp; }</div><div class="line"><a name="l00551"></a><span class="lineno"> 551</span>&nbsp; }</div><div class="line"><a name="l00552"></a><span class="lineno"> 552</span>&nbsp; };</div><div class="line"><a name="l00553"></a><span class="lineno"> 553</span>&nbsp; </div><div class="line"><a name="l00554"></a><span class="lineno"><a class="code" href="struct_i_data_base_1_1_pub_file_error_data.html"> 554</a></span>&nbsp; <span class="keyword">struct </span><a class="code" href="struct_i_data_base_1_1_pub_file_error_data.html">PubFileErrorData</a></div><div class="line"><a name="l00555"></a><span class="lineno"> 555</span>&nbsp; {</div><div class="line"><a name="l00556"></a><span class="lineno"> 556</span>&nbsp; <a class="code" href="class_i_data_base.html#a6a7ea5be7b95880d4415e4eb1288ea2e">ByteSwapOrder</a> fByteSwap;</div><div class="line"><a name="l00557"></a><span class="lineno"> 557</span>&nbsp; bool16 fReadOnly;</div><div class="line"><a name="l00558"></a><span class="lineno"> 558</span>&nbsp; uint32 fSaveCount;</div><div class="line"><a name="l00559"></a><span class="lineno"> 559</span>&nbsp; <a class="code" href="class_i_d_type.html">UID</a> fRootUID;</div><div class="line"><a name="l00560"></a><span class="lineno"> 560</span>&nbsp; <a class="code" href="class_i_d_type.html">UID</a> fMaxUID;</div><div class="line"><a name="l00561"></a><span class="lineno"> 561</span>&nbsp; <a class="code" href="struct_i_data_base_1_1_data_file_error_data.html">DataFileErrorData</a>* fMainFileErrorDataPtr;</div><div class="line"><a name="l00562"></a><span class="lineno"> 562</span>&nbsp; <a class="code" href="struct_i_data_base_1_1_data_file_error_data.html">DataFileErrorData</a>* fMiniFileErrorDataPtr;</div><div class="line"><a name="l00563"></a><span class="lineno"> 563</span>&nbsp; </div><div class="line"><a name="l00564"></a><span class="lineno"> 564</span>&nbsp; <a class="code" href="struct_i_data_base_1_1_pub_file_error_data.html">PubFileErrorData</a>() :</div><div class="line"><a name="l00565"></a><span class="lineno"> 565</span>&nbsp; fByteSwap(<a class="code" href="class_i_data_base.html#a6a7ea5be7b95880d4415e4eb1288ea2ea67c13e9b8f5077041b2b9f61958498ec">kIntelOrder</a>),</div><div class="line"><a name="l00566"></a><span class="lineno"> 566</span>&nbsp; fReadOnly(kFalse),</div><div class="line"><a name="l00567"></a><span class="lineno"> 567</span>&nbsp; fSaveCount(0),</div><div class="line"><a name="l00568"></a><span class="lineno"> 568</span>&nbsp; fRootUID(kInvalidUID),</div><div class="line"><a name="l00569"></a><span class="lineno"> 569</span>&nbsp; fMaxUID(kInvalidUID),</div><div class="line"><a name="l00570"></a><span class="lineno"> 570</span>&nbsp; fMainFileErrorDataPtr(<span class="keyword">nullptr</span>),</div><div class="line"><a name="l00571"></a><span class="lineno"> 571</span>&nbsp; fMiniFileErrorDataPtr(<span class="keyword">nullptr</span>)</div><div class="line"><a name="l00572"></a><span class="lineno"> 572</span>&nbsp; {</div><div class="line"><a name="l00573"></a><span class="lineno"> 573</span>&nbsp; </div><div class="line"><a name="l00574"></a><span class="lineno"> 574</span>&nbsp; }</div><div class="line"><a name="l00575"></a><span class="lineno"> 575</span>&nbsp; </div><div class="line"><a name="l00576"></a><span class="lineno"> 576</span>&nbsp; <a class="code" href="struct_i_data_base_1_1_pub_file_error_data.html">PubFileErrorData</a>(<span class="keyword">const</span> <a class="code" href="struct_i_data_base_1_1_pub_file_error_data.html">PubFileErrorData</a>&amp; other) : fMainFileErrorDataPtr(<span class="keyword">nullptr</span>), fMiniFileErrorDataPtr(<span class="keyword">nullptr</span>)</div><div class="line"><a name="l00577"></a><span class="lineno"> 577</span>&nbsp; {</div><div class="line"><a name="l00578"></a><span class="lineno"> 578</span>&nbsp; CommonCopyAssignmentStuff(other);</div><div class="line"><a name="l00579"></a><span class="lineno"> 579</span>&nbsp; }</div><div class="line"><a name="l00580"></a><span class="lineno"> 580</span>&nbsp; </div><div class="line"><a name="l00581"></a><span class="lineno"> 581</span>&nbsp; <a class="code" href="struct_i_data_base_1_1_pub_file_error_data.html">PubFileErrorData</a>&amp; operator=(<span class="keyword">const</span> <a class="code" href="struct_i_data_base_1_1_pub_file_error_data.html">PubFileErrorData</a>&amp; other)</div><div class="line"><a name="l00582"></a><span class="lineno"> 582</span>&nbsp; {</div><div class="line"><a name="l00583"></a><span class="lineno"> 583</span>&nbsp; InternalClear();</div><div class="line"><a name="l00584"></a><span class="lineno"> 584</span>&nbsp; CommonCopyAssignmentStuff(other);</div><div class="line"><a name="l00585"></a><span class="lineno"> 585</span>&nbsp; <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div><div class="line"><a name="l00586"></a><span class="lineno"> 586</span>&nbsp; }</div><div class="line"><a name="l00587"></a><span class="lineno"> 587</span>&nbsp; </div><div class="line"><a name="l00588"></a><span class="lineno"> 588</span>&nbsp; ~<a class="code" href="struct_i_data_base_1_1_pub_file_error_data.html">PubFileErrorData</a>()</div><div class="line"><a name="l00589"></a><span class="lineno"> 589</span>&nbsp; {</div><div class="line"><a name="l00590"></a><span class="lineno"> 590</span>&nbsp; InternalClear();</div><div class="line"><a name="l00591"></a><span class="lineno"> 591</span>&nbsp; }</div><div class="line"><a name="l00592"></a><span class="lineno"> 592</span>&nbsp; <span class="keyword">private</span>:</div><div class="line"><a name="l00593"></a><span class="lineno"> 593</span>&nbsp; <span class="keywordtype">void</span> InternalClear()</div><div class="line"><a name="l00594"></a><span class="lineno"> 594</span>&nbsp; {</div><div class="line"><a name="l00595"></a><span class="lineno"> 595</span>&nbsp; <span class="keywordflow">if</span>(fMainFileErrorDataPtr != <span class="keyword">nullptr</span>)</div><div class="line"><a name="l00596"></a><span class="lineno"> 596</span>&nbsp; {</div><div class="line"><a name="l00597"></a><span class="lineno"> 597</span>&nbsp; <span class="keyword">delete</span> fMainFileErrorDataPtr;</div><div class="line"><a name="l00598"></a><span class="lineno"> 598</span>&nbsp; fMainFileErrorDataPtr = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00599"></a><span class="lineno"> 599</span>&nbsp; }</div><div class="line"><a name="l00600"></a><span class="lineno"> 600</span>&nbsp; <span class="keywordflow">if</span>(fMiniFileErrorDataPtr != <span class="keyword">nullptr</span>)</div><div class="line"><a name="l00601"></a><span class="lineno"> 601</span>&nbsp; {</div><div class="line"><a name="l00602"></a><span class="lineno"> 602</span>&nbsp; <span class="keyword">delete</span> fMiniFileErrorDataPtr;</div><div class="line"><a name="l00603"></a><span class="lineno"> 603</span>&nbsp; fMiniFileErrorDataPtr = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00604"></a><span class="lineno"> 604</span>&nbsp; }</div><div class="line"><a name="l00605"></a><span class="lineno"> 605</span>&nbsp; }</div><div class="line"><a name="l00606"></a><span class="lineno"> 606</span>&nbsp;</div><div class="line"><a name="l00607"></a><span class="lineno"> 607</span>&nbsp; <span class="keywordtype">void</span> CommonCopyAssignmentStuff(<span class="keyword">const</span> <a class="code" href="struct_i_data_base_1_1_pub_file_error_data.html">PubFileErrorData</a>&amp; other)</div><div class="line"><a name="l00608"></a><span class="lineno"> 608</span>&nbsp; {</div><div class="line"><a name="l00609"></a><span class="lineno"> 609</span>&nbsp; fByteSwap = other.fByteSwap;</div><div class="line"><a name="l00610"></a><span class="lineno"> 610</span>&nbsp; fReadOnly = other.fReadOnly;</div><div class="line"><a name="l00611"></a><span class="lineno"> 611</span>&nbsp; fSaveCount = other.fSaveCount;</div><div class="line"><a name="l00612"></a><span class="lineno"> 612</span>&nbsp; fRootUID = other.fRootUID;</div><div class="line"><a name="l00613"></a><span class="lineno"> 613</span>&nbsp; fMaxUID = other.fMaxUID;</div><div class="line"><a name="l00614"></a><span class="lineno"> 614</span>&nbsp; <span class="keywordflow">if</span>(other.fMainFileErrorDataPtr != <span class="keyword">nullptr</span>)</div><div class="line"><a name="l00615"></a><span class="lineno"> 615</span>&nbsp; {</div><div class="line"><a name="l00616"></a><span class="lineno"> 616</span>&nbsp; fMainFileErrorDataPtr = <span class="keyword">new</span> <a class="code" href="struct_i_data_base_1_1_data_file_error_data.html">DataFileErrorData</a>;</div><div class="line"><a name="l00617"></a><span class="lineno"> 617</span>&nbsp; *fMainFileErrorDataPtr = *other.fMainFileErrorDataPtr;</div><div class="line"><a name="l00618"></a><span class="lineno"> 618</span>&nbsp; }</div><div class="line"><a name="l00619"></a><span class="lineno"> 619</span>&nbsp; <span class="keywordflow">else</span></div><div class="line"><a name="l00620"></a><span class="lineno"> 620</span>&nbsp; {</div><div class="line"><a name="l00621"></a><span class="lineno"> 621</span>&nbsp; fMainFileErrorDataPtr = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00622"></a><span class="lineno"> 622</span>&nbsp; }</div><div class="line"><a name="l00623"></a><span class="lineno"> 623</span>&nbsp; </div><div class="line"><a name="l00624"></a><span class="lineno"> 624</span>&nbsp; <span class="keywordflow">if</span>(other.fMiniFileErrorDataPtr != <span class="keyword">nullptr</span>)</div><div class="line"><a name="l00625"></a><span class="lineno"> 625</span>&nbsp; {</div><div class="line"><a name="l00626"></a><span class="lineno"> 626</span>&nbsp; fMiniFileErrorDataPtr = <span class="keyword">new</span> <a class="code" href="struct_i_data_base_1_1_data_file_error_data.html">DataFileErrorData</a>;</div><div class="line"><a name="l00627"></a><span class="lineno"> 627</span>&nbsp; *fMiniFileErrorDataPtr = *other.fMiniFileErrorDataPtr;</div><div class="line"><a name="l00628"></a><span class="lineno"> 628</span>&nbsp; }</div><div class="line"><a name="l00629"></a><span class="lineno"> 629</span>&nbsp; <span class="keywordflow">else</span></div><div class="line"><a name="l00630"></a><span class="lineno"> 630</span>&nbsp; {</div><div class="line"><a name="l00631"></a><span class="lineno"> 631</span>&nbsp; fMiniFileErrorDataPtr = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00632"></a><span class="lineno"> 632</span>&nbsp; }</div><div class="line"><a name="l00633"></a><span class="lineno"> 633</span>&nbsp; }</div><div class="line"><a name="l00634"></a><span class="lineno"> 634</span>&nbsp; </div><div class="line"><a name="l00635"></a><span class="lineno"> 635</span>&nbsp; } ;</div><div class="line"><a name="l00636"></a><span class="lineno"> 636</span>&nbsp; </div><div class="line"><a name="l00639"></a><span class="lineno"><a class="code" href="struct_i_data_base_1_1_d_b_error.html"> 639</a></span>&nbsp; <span class="keyword">struct </span><a class="code" href="struct_i_data_base_1_1_d_b_error.html">DBError</a></div><div class="line"><a name="l00640"></a><span class="lineno"> 640</span>&nbsp; {</div><div class="line"><a name="l00641"></a><span class="lineno"> 641</span>&nbsp; <a class="code" href="class_i_data_base.html#aeb5462fe60d1a1f2f36bd014a0514510">DBResultCode</a> fResultCode;</div><div class="line"><a name="l00642"></a><span class="lineno"> 642</span>&nbsp; <a class="code" href="class_i_data_base.html#a7c32e77fc00337524a64e92c6160d81e">ProtectionLevel</a> fProtLevel;</div><div class="line"><a name="l00643"></a><span class="lineno"> 643</span>&nbsp; bool16 fModified;</div><div class="line"><a name="l00644"></a><span class="lineno"> 644</span>&nbsp; bool16 fEnforcedDBResultCode; <span class="comment">// incase of open and recover workflows - db result code is enforced as the main error code.</span></div><div class="line"><a name="l00645"></a><span class="lineno"> 645</span>&nbsp; <a class="code" href="class_i_d_file.html">IDFile</a>* fUserProvidedFilePtr; <span class="comment">// incase of operations like open, where internal pubfile etc are not instantiated, this refers to user supplied file.</span></div><div class="line"><a name="l00646"></a><span class="lineno"> 646</span>&nbsp; <a class="code" href="struct_i_data_base_1_1_pub_file_error_data.html">PubFileErrorData</a>* fPubFileErrorDataPtr;</div><div class="line"><a name="l00647"></a><span class="lineno"> 647</span>&nbsp; </div><div class="line"><a name="l00648"></a><span class="lineno"> 648</span>&nbsp; <a class="code" href="struct_i_data_base_1_1_d_b_error.html">DBError</a>() :</div><div class="line"><a name="l00649"></a><span class="lineno"> 649</span>&nbsp; fResultCode(<a class="code" href="class_i_data_base.html#aeb5462fe60d1a1f2f36bd014a0514510af21dc0bfcf9ad4b2c3169f53de1f35d4">IDataBase::kNoError</a>),</div><div class="line"><a name="l00650"></a><span class="lineno"> 650</span>&nbsp; fProtLevel(<a class="code" href="class_i_data_base.html#a7c32e77fc00337524a64e92c6160d81ead4a6f3399529f16e48d3ab0c84cb5800">IDataBase::kNoProtection</a>),</div><div class="line"><a name="l00651"></a><span class="lineno"> 651</span>&nbsp; fModified(kFalse),</div><div class="line"><a name="l00652"></a><span class="lineno"> 652</span>&nbsp; fEnforcedDBResultCode(kFalse),</div><div class="line"><a name="l00653"></a><span class="lineno"> 653</span>&nbsp; fUserProvidedFilePtr(<span class="keyword">nullptr</span>),</div><div class="line"><a name="l00654"></a><span class="lineno"> 654</span>&nbsp; fPubFileErrorDataPtr(<span class="keyword">nullptr</span>)</div><div class="line"><a name="l00655"></a><span class="lineno"> 655</span>&nbsp; {</div><div class="line"><a name="l00656"></a><span class="lineno"> 656</span>&nbsp; }</div><div class="line"><a name="l00657"></a><span class="lineno"> 657</span>&nbsp; </div><div class="line"><a name="l00658"></a><span class="lineno"> 658</span>&nbsp; <a class="code" href="struct_i_data_base_1_1_d_b_error.html">DBError</a>(<span class="keyword">const</span> <a class="code" href="struct_i_data_base_1_1_d_b_error.html">DBError</a>&amp; other) : fUserProvidedFilePtr(<span class="keyword">nullptr</span>), fPubFileErrorDataPtr(<span class="keyword">nullptr</span>)</div><div class="line"><a name="l00659"></a><span class="lineno"> 659</span>&nbsp; {</div><div class="line"><a name="l00660"></a><span class="lineno"> 660</span>&nbsp; CommonCopyAssignmentStuff(other);</div><div class="line"><a name="l00661"></a><span class="lineno"> 661</span>&nbsp; }</div><div class="line"><a name="l00662"></a><span class="lineno"> 662</span>&nbsp; </div><div class="line"><a name="l00663"></a><span class="lineno"> 663</span>&nbsp; <a class="code" href="struct_i_data_base_1_1_d_b_error.html">DBError</a>&amp; operator=(<span class="keyword">const</span> <a class="code" href="struct_i_data_base_1_1_d_b_error.html">DBError</a>&amp; other)</div><div class="line"><a name="l00664"></a><span class="lineno"> 664</span>&nbsp; {</div><div class="line"><a name="l00665"></a><span class="lineno"> 665</span>&nbsp; InternalClear();</div><div class="line"><a name="l00666"></a><span class="lineno"> 666</span>&nbsp; CommonCopyAssignmentStuff(other);</div><div class="line"><a name="l00667"></a><span class="lineno"> 667</span>&nbsp; <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div><div class="line"><a name="l00668"></a><span class="lineno"> 668</span>&nbsp; }</div><div class="line"><a name="l00669"></a><span class="lineno"> 669</span>&nbsp; </div><div class="line"><a name="l00670"></a><span class="lineno"> 670</span>&nbsp; ~<a class="code" href="struct_i_data_base_1_1_d_b_error.html">DBError</a>()</div><div class="line"><a name="l00671"></a><span class="lineno"> 671</span>&nbsp; {</div><div class="line"><a name="l00672"></a><span class="lineno"> 672</span>&nbsp; InternalClear();</div><div class="line"><a name="l00673"></a><span class="lineno"> 673</span>&nbsp; }</div><div class="line"><a name="l00674"></a><span class="lineno"> 674</span>&nbsp; </div><div class="line"><a name="l00675"></a><span class="lineno"> 675</span>&nbsp; <span class="keywordtype">void</span> Clear()</div><div class="line"><a name="l00676"></a><span class="lineno"> 676</span>&nbsp; {</div><div class="line"><a name="l00677"></a><span class="lineno"> 677</span>&nbsp; fResultCode = <a class="code" href="class_i_data_base.html#aeb5462fe60d1a1f2f36bd014a0514510af21dc0bfcf9ad4b2c3169f53de1f35d4">IDataBase::kNoError</a>;</div><div class="line"><a name="l00678"></a><span class="lineno"> 678</span>&nbsp; fProtLevel = <a class="code" href="class_i_data_base.html#a7c32e77fc00337524a64e92c6160d81ead4a6f3399529f16e48d3ab0c84cb5800">IDataBase::kNoProtection</a>;</div><div class="line"><a name="l00679"></a><span class="lineno"> 679</span>&nbsp; fModified = kFalse;</div><div class="line"><a name="l00680"></a><span class="lineno"> 680</span>&nbsp; fEnforcedDBResultCode = kFalse;</div><div class="line"><a name="l00681"></a><span class="lineno"> 681</span>&nbsp; InternalClear();</div><div class="line"><a name="l00682"></a><span class="lineno"> 682</span>&nbsp; }</div><div class="line"><a name="l00683"></a><span class="lineno"> 683</span>&nbsp; </div><div class="line"><a name="l00684"></a><span class="lineno"> 684</span>&nbsp; <span class="keyword">private</span>:</div><div class="line"><a name="l00685"></a><span class="lineno"> 685</span>&nbsp; <span class="keywordtype">void</span> InternalClear()</div><div class="line"><a name="l00686"></a><span class="lineno"> 686</span>&nbsp; {</div><div class="line"><a name="l00687"></a><span class="lineno"> 687</span>&nbsp; <span class="keywordflow">if</span>(fUserProvidedFilePtr != <span class="keyword">nullptr</span>)</div><div class="line"><a name="l00688"></a><span class="lineno"> 688</span>&nbsp; {</div><div class="line"><a name="l00689"></a><span class="lineno"> 689</span>&nbsp; <span class="keyword">delete</span> fUserProvidedFilePtr;</div><div class="line"><a name="l00690"></a><span class="lineno"> 690</span>&nbsp; fUserProvidedFilePtr = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00691"></a><span class="lineno"> 691</span>&nbsp; }</div><div class="line"><a name="l00692"></a><span class="lineno"> 692</span>&nbsp; </div><div class="line"><a name="l00693"></a><span class="lineno"> 693</span>&nbsp; <span class="keywordflow">if</span>(fPubFileErrorDataPtr != <span class="keyword">nullptr</span>)</div><div class="line"><a name="l00694"></a><span class="lineno"> 694</span>&nbsp; {</div><div class="line"><a name="l00695"></a><span class="lineno"> 695</span>&nbsp; <span class="keyword">delete</span> fPubFileErrorDataPtr;</div><div class="line"><a name="l00696"></a><span class="lineno"> 696</span>&nbsp; fPubFileErrorDataPtr = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00697"></a><span class="lineno"> 697</span>&nbsp; }</div><div class="line"><a name="l00698"></a><span class="lineno"> 698</span>&nbsp; }</div><div class="line"><a name="l00699"></a><span class="lineno"> 699</span>&nbsp; </div><div class="line"><a name="l00700"></a><span class="lineno"> 700</span>&nbsp; <span class="keywordtype">void</span> CommonCopyAssignmentStuff(<span class="keyword">const</span> <a class="code" href="struct_i_data_base_1_1_d_b_error.html">DBError</a>&amp; other)</div><div class="line"><a name="l00701"></a><span class="lineno"> 701</span>&nbsp; {</div><div class="line"><a name="l00702"></a><span class="lineno"> 702</span>&nbsp; fResultCode = other.fResultCode;</div><div class="line"><a name="l00703"></a><span class="lineno"> 703</span>&nbsp; fProtLevel = other.fProtLevel;</div><div class="line"><a name="l00704"></a><span class="lineno"> 704</span>&nbsp; fModified = other.fModified;</div><div class="line"><a name="l00705"></a><span class="lineno"> 705</span>&nbsp; fEnforcedDBResultCode = other.fEnforcedDBResultCode;</div><div class="line"><a name="l00706"></a><span class="lineno"> 706</span>&nbsp; <span class="keywordflow">if</span>(other.fUserProvidedFilePtr != <span class="keyword">nullptr</span>)</div><div class="line"><a name="l00707"></a><span class="lineno"> 707</span>&nbsp; {</div><div class="line"><a name="l00708"></a><span class="lineno"> 708</span>&nbsp; fUserProvidedFilePtr = <span class="keyword">new</span> <a class="code" href="class_i_d_file.html">IDFile</a>;</div><div class="line"><a name="l00709"></a><span class="lineno"> 709</span>&nbsp; *fUserProvidedFilePtr = *other.fUserProvidedFilePtr;</div><div class="line"><a name="l00710"></a><span class="lineno"> 710</span>&nbsp; }</div><div class="line"><a name="l00711"></a><span class="lineno"> 711</span>&nbsp; <span class="keywordflow">else</span></div><div class="line"><a name="l00712"></a><span class="lineno"> 712</span>&nbsp; {</div><div class="line"><a name="l00713"></a><span class="lineno"> 713</span>&nbsp; fUserProvidedFilePtr = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00714"></a><span class="lineno"> 714</span>&nbsp; }</div><div class="line"><a name="l00715"></a><span class="lineno"> 715</span>&nbsp; </div><div class="line"><a name="l00716"></a><span class="lineno"> 716</span>&nbsp; <span class="keywordflow">if</span>(other.fPubFileErrorDataPtr != <span class="keyword">nullptr</span>)</div><div class="line"><a name="l00717"></a><span class="lineno"> 717</span>&nbsp; {</div><div class="line"><a name="l00718"></a><span class="lineno"> 718</span>&nbsp; fPubFileErrorDataPtr = <span class="keyword">new</span> <a class="code" href="struct_i_data_base_1_1_pub_file_error_data.html">PubFileErrorData</a>;</div><div class="line"><a name="l00719"></a><span class="lineno"> 719</span>&nbsp; *fPubFileErrorDataPtr = *other.fPubFileErrorDataPtr;</div><div class="line"><a name="l00720"></a><span class="lineno"> 720</span>&nbsp; }</div><div class="line"><a name="l00721"></a><span class="lineno"> 721</span>&nbsp; <span class="keywordflow">else</span></div><div class="line"><a name="l00722"></a><span class="lineno"> 722</span>&nbsp; {</div><div class="line"><a name="l00723"></a><span class="lineno"> 723</span>&nbsp; fPubFileErrorDataPtr = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00724"></a><span class="lineno"> 724</span>&nbsp; }</div><div class="line"><a name="l00725"></a><span class="lineno"> 725</span>&nbsp; }</div><div class="line"><a name="l00726"></a><span class="lineno"> 726</span>&nbsp; } ;</div><div class="line"><a name="l00727"></a><span class="lineno"> 727</span>&nbsp; </div><div class="line"><a name="l00731"></a><span class="lineno"> 731</span>&nbsp; <span class="keyword">virtual</span> <span class="keyword">const</span> <a class="code" href="struct_i_data_base_1_1_d_b_error.html">DBError</a>&amp; <a class="code" href="class_i_data_base.html#a84b8fb8d42ebc335eedb2bd5f830de54">GetError</a>() <span class="keyword">const</span> = 0;</div><div class="line"><a name="l00734"></a><span class="lineno"> 734</span>&nbsp; <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_i_data_base.html#a86d4a0084d9a34cec17ba49bd6e9174f">ClearError</a>() = 0;</div><div class="line"><a name="l00735"></a><span class="lineno"> 735</span>&nbsp; </div><div class="line"><a name="l00736"></a><span class="lineno"> 736</span>&nbsp; </div><div class="line"><a name="l00737"></a><span class="lineno"> 737</span>&nbsp; <span class="comment">//------------------------------------------------------------------------------------</span></div><div class="line"><a name="l00738"></a><span class="lineno"> 738</span>&nbsp; <span class="comment">// Contiguous UID Support</span></div><div class="line"><a name="l00739"></a><span class="lineno"> 739</span>&nbsp; <span class="comment">//------------------------------------------------------------------------------------</span></div><div class="line"><a name="l00740"></a><span class="lineno"> 740</span>&nbsp;</div><div class="line"><a name="l00742"></a><span class="lineno"> 742</span>&nbsp; <span class="keyword">virtual</span> <a class="code" href="class_i_d_type.html">UID</a> <a class="code" href="class_i_data_base.html#a9801186e8e3ecdd3553290ad3b070048">NewContiguousUID</a> (uint16 type, bool16 externallyWritable) = 0;</div><div class="line"><a name="l00744"></a><span class="lineno"> 744</span>&nbsp; <span class="keyword">virtual</span> bool16 <a class="code" href="class_i_data_base.html#a2de28e708bc501ead2a28c59873d8d98">GetContiguousUIDChangeMarker</a> (<a class="code" href="class_i_d_type.html">UID</a> <span class="keywordtype">id</span>) <span class="keyword">const</span> = 0;</div><div class="line"><a name="l00746"></a><span class="lineno"> 746</span>&nbsp; <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_i_data_base.html#a8977026d5b7421a309578a522c3fbe63">SetContiguousUIDChangeMarker</a> (<a class="code" href="class_i_d_type.html">UID</a> <span class="keywordtype">id</span>, bool16 changed) = 0;</div><div class="line"><a name="l00747"></a><span class="lineno"> 747</span>&nbsp;</div><div class="line"><a name="l00748"></a><span class="lineno"> 748</span>&nbsp; <span class="comment">//------------------------------------------------------------------------------------</span></div><div class="line"><a name="l00749"></a><span class="lineno"> 749</span>&nbsp; <span class="comment">// For internal use only</span></div><div class="line"><a name="l00750"></a><span class="lineno"> 750</span>&nbsp; <span class="comment">//------------------------------------------------------------------------------------</span></div><div class="line"><a name="l00751"></a><span class="lineno"> 751</span>&nbsp;</div><div class="line"><a name="l00753"></a><span class="lineno"> 753</span>&nbsp; <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_i_data_base.html#a42e3a1db513c94c36325678529eba6dd">DestructInstance</a>(<a class="code" href="class_i_d_type.html">UID</a> <span class="keywordtype">id</span>) = 0;</div><div class="line"><a name="l00755"></a><span class="lineno"> 755</span>&nbsp; <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_i_data_base.html#aa9a9009c82fafb6026d3c01f05b5a5eb">ClearDirty</a>(<a class="code" href="class_i_p_m_persist.html">IPMPersist</a> *flushThis) = 0;</div><div class="line"><a name="l00757"></a><span class="lineno"> 757</span>&nbsp; <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_i_data_base.html#aad7003415ed945c4fb953d88cf4bf311">DirtyObject</a>(<a class="code" href="class_i_p_m_persist.html">IPMPersist</a> *flushThis, <a class="code" href="class_i_d_type.html">ClassID</a> clsID, <a class="code" href="class_i_d_type.html">ImplementationID</a> tag, bool16 allowModification = kTrue, bool16 firstDirtyInterface = kTrue) = 0;</div><div class="line"><a name="l00759"></a><span class="lineno"> 759</span>&nbsp; <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_i_data_base.html#ac8c3f56fbcb3e9ce3ae0730788041627">SetError</a>(<a class="code" href="class_i_data_base.html#aeb5462fe60d1a1f2f36bd014a0514510">DBResultCode</a> dbErrCode, <span class="keyword">const</span> <a class="code" href="class_i_d_file.html">IDFile</a>* userProvidedFile = <span class="keyword">nullptr</span>) = 0;</div><div class="line"><a name="l00761"></a><span class="lineno"> 761</span>&nbsp; <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_i_data_base.html#a0a6eb4f96a5184cd5d864625a7be580a">PurgeMemory</a>(int32 level) = 0;</div><div class="line"><a name="l00763"></a><span class="lineno"> 763</span>&nbsp; <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_i_data_base.html#a94b918326a0372bfe185c63524feacdc">AdviseMemoryState</a>(int32 level) = 0;</div><div class="line"><a name="l00765"></a><span class="lineno"> 765</span>&nbsp; <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_i_data_base.html#a64e57e8a588384efcabb3901d7718ff2">RegisterRootObject</a>(<a class="code" href="class_i_p_m_unknown.html">IPMUnknown</a> *root) = 0;</div><div class="line"><a name="l00767"></a><span class="lineno"> 767</span>&nbsp; <span class="keyword">virtual</span> IPubFile* <a class="code" href="class_i_data_base.html#ae02a57666360af3bf9d425cb0913834b">GetPubFile</a>() = 0;</div><div class="line"><a name="l00769"></a><span class="lineno"> 769</span>&nbsp; <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_i_data_base.html#a1674ea3287d4260ef2d007c4936663ca">IterateInstantiatedObjects</a>(IInstanceProcessor *i) = 0;</div><div class="line"><a name="l00771"></a><span class="lineno"> 771</span>&nbsp; <span class="keyword">virtual</span> InstanceProfiler *<a class="code" href="class_i_data_base.html#a06dc4107499a19c06ecb1d487c5c7036">NewInstanceProfiler</a>() = 0;</div><div class="line"><a name="l00772"></a><span class="lineno"> 772</span>&nbsp; </div><div class="line"><a name="l00773"></a><span class="lineno"> 773</span>&nbsp;<span class="preprocessor">#ifdef DEBUG</span></div><div class="line"><a name="l00774"></a><span class="lineno"> 774</span>&nbsp;<span class="preprocessor"></span></div><div class="line"><a name="l00775"></a><span class="lineno"> 775</span>&nbsp; <span class="keyword">virtual</span> <span class="keywordtype">void</span> SetInstanceCacheState(bool16 on) = 0;</div><div class="line"><a name="l00777"></a><span class="lineno"> 777</span>&nbsp; <span class="keyword">virtual</span> bool16 GetInstanceCacheState() = 0;</div><div class="line"><a name="l00778"></a><span class="lineno"> 778</span>&nbsp; </div><div class="line"><a name="l00780"></a><span class="lineno"> 780</span>&nbsp; <span class="keyword">virtual</span> bool16 SetDirtyLimit(bool16 allowModification) = 0;</div><div class="line"><a name="l00782"></a><span class="lineno"> 782</span>&nbsp; <span class="keyword">virtual</span> bool16 GetDirtyLimit() = 0;</div><div class="line"><a name="l00783"></a><span class="lineno"> 783</span>&nbsp; </div><div class="line"><a name="l00785"></a><span class="lineno"> 785</span>&nbsp; <span class="keyword">virtual</span> bool16 BeingDestructed() = 0;</div><div class="line"><a name="l00786"></a><span class="lineno"> 786</span>&nbsp;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00787"></a><span class="lineno"> 787</span>&nbsp;<span class="preprocessor"></span></div><div class="line"><a name="l00788"></a><span class="lineno"> 788</span>&nbsp; <span class="comment">//------------------------------------------------------------------------------------</span></div><div class="line"><a name="l00789"></a><span class="lineno"> 789</span>&nbsp; <span class="comment">// Date/Time for Underlying Store</span></div><div class="line"><a name="l00790"></a><span class="lineno"> 790</span>&nbsp; <span class="comment">//------------------------------------------------------------------------------------</span></div><div class="line"><a name="l00791"></a><span class="lineno"> 791</span>&nbsp;</div><div class="line"><a name="l00796"></a><span class="lineno"> 796</span>&nbsp; <span class="keyword">virtual</span> <a class="code" href="class_i_data_base.html#aeb5462fe60d1a1f2f36bd014a0514510">DBResultCode</a> <a class="code" href="class_i_data_base.html#a556d1adfa48f75209ce5c69af9e4ff3a">GetCreationTime</a> (<a class="code" href="class_i_d_time.html">IDTime</a> &amp;gt) = 0;</div><div class="line"><a name="l00797"></a><span class="lineno"> 797</span>&nbsp;</div><div class="line"><a name="l00802"></a><span class="lineno"> 802</span>&nbsp; <span class="keyword">virtual</span> <a class="code" href="class_i_data_base.html#aeb5462fe60d1a1f2f36bd014a0514510">DBResultCode</a> <a class="code" href="class_i_data_base.html#aed4be5e9c533a7011e134c0f7d415851">GetModificationTime</a> (<a class="code" href="class_i_d_time.html">IDTime</a> &amp;gt) = 0;</div><div class="line"><a name="l00803"></a><span class="lineno"> 803</span>&nbsp;</div><div class="line"><a name="l00804"></a><span class="lineno"> 804</span>&nbsp; <span class="comment">//------------------------------------------------------------------------------------</span></div><div class="line"><a name="l00805"></a><span class="lineno"> 805</span>&nbsp; <span class="comment">// Save Sequence Numbers</span></div><div class="line"><a name="l00806"></a><span class="lineno"> 806</span>&nbsp; <span class="comment">//------------------------------------------------------------------------------------</span></div><div class="line"><a name="l00807"></a><span class="lineno"> 807</span>&nbsp;</div><div class="line"><a name="l00809"></a><span class="lineno"> 809</span>&nbsp; <span class="keyword">virtual</span> uint64 <a class="code" href="class_i_data_base.html#a7361e271810bbaf81eb9986579ad503d">GetSequenceNumberAtOpen</a> () <span class="keyword">const</span> = 0;</div><div class="line"><a name="l00811"></a><span class="lineno"> 811</span>&nbsp; <span class="keyword">virtual</span> uint64 <a class="code" href="class_i_data_base.html#a235678d4e569b5b873b415709ed36eca">GetCurrentSequenceNumber</a> () <span class="keyword">const</span> = 0;</div><div class="line"><a name="l00812"></a><span class="lineno"> 812</span>&nbsp;</div><div class="line"><a name="l00814"></a><span class="lineno"><a class="code" href="class_i_data_base.html#ae6dfd753b2f6aaaf2a57bfc27d0ca7f4"> 814</a></span>&nbsp; <span class="keyword">typedef</span> <span class="keyword">enum</span></div><div class="line"><a name="l00815"></a><span class="lineno"> 815</span>&nbsp; {</div><div class="line"><a name="l00816"></a><span class="lineno"> 816</span>&nbsp; kUserFileExclusive = 0,</div><div class="line"><a name="l00817"></a><span class="lineno"> 817</span>&nbsp; kUserFileShared</div><div class="line"><a name="l00818"></a><span class="lineno"> 818</span>&nbsp; } <a class="code" href="class_i_data_base.html#ae6dfd753b2f6aaaf2a57bfc27d0ca7f4">UserFileMode</a>;</div><div class="line"><a name="l00819"></a><span class="lineno"> 819</span>&nbsp;</div><div class="line"><a name="l00820"></a><span class="lineno"> 820</span>&nbsp; <span class="comment">//------------------------------------------------------------------------------------</span></div><div class="line"><a name="l00821"></a><span class="lineno"> 821</span>&nbsp; <span class="comment">// Cache performance. This API is for internal use only.</span></div><div class="line"><a name="l00822"></a><span class="lineno"> 822</span>&nbsp; <span class="comment">//------------------------------------------------------------------------------------</span></div><div class="line"><a name="l00824"></a><span class="lineno"> 824</span>&nbsp;<span class="comment"></span> <span class="keyword">virtual</span> uint32 <a class="code" href="class_i_data_base.html#af747f2b0c3830544129c1dcc50c08469">GetCacheFaultRate</a>() <span class="keyword">const</span> = 0;</div><div class="line"><a name="l00826"></a><span class="lineno"> 826</span>&nbsp; <span class="keyword">virtual</span> uint32 <a class="code" href="class_i_data_base.html#aa695f0bf3193b70a187250f9d557ec13">GetCacheTotalFaults</a>() <span class="keyword">const</span> = 0;</div><div class="line"><a name="l00827"></a><span class="lineno"> 827</span>&nbsp;</div><div class="line"><a name="l00829"></a><span class="lineno"><a class="code" href="class_i_data_base.html#a9ae730422059fc92137c152bcf6e5199"> 829</a></span>&nbsp; <span class="keyword">enum</span> <a class="code" href="class_i_data_base.html#a9ae730422059fc92137c152bcf6e5199">CachePolicy</a></div><div class="line"><a name="l00830"></a><span class="lineno"> 830</span>&nbsp; {</div><div class="line"><a name="l00831"></a><span class="lineno"> 831</span>&nbsp; kAnnaCachePolicy,</div><div class="line"><a name="l00832"></a><span class="lineno"> 832</span>&nbsp; kFaultRateBasedPolicy,</div><div class="line"><a name="l00833"></a><span class="lineno"> 833</span>&nbsp; kCacheAllPolicy</div><div class="line"><a name="l00834"></a><span class="lineno"> 834</span>&nbsp; };</div><div class="line"><a name="l00835"></a><span class="lineno"> 835</span>&nbsp;</div><div class="line"><a name="l00837"></a><span class="lineno"> 837</span>&nbsp; <span class="keyword">virtual</span> <a class="code" href="class_i_data_base.html#a9ae730422059fc92137c152bcf6e5199">CachePolicy</a> <a class="code" href="class_i_data_base.html#a19ffa5e2667c3b4b4545c6f0692810f3">GetCachePolicy</a>() <span class="keyword">const</span> = 0;</div><div class="line"><a name="l00839"></a><span class="lineno"> 839</span>&nbsp; <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_i_data_base.html#a5460dc3fa0d722a638e3760f45a034ee">SetCachePolicy</a>(<a class="code" href="class_i_data_base.html#a9ae730422059fc92137c152bcf6e5199">CachePolicy</a> policy) = 0;</div><div class="line"><a name="l00840"></a><span class="lineno"> 840</span>&nbsp; </div><div class="line"><a name="l00841"></a><span class="lineno"> 841</span>&nbsp; <span class="comment">//------------------------------------------------------------------------------------</span></div><div class="line"><a name="l00842"></a><span class="lineno"> 842</span>&nbsp; <span class="comment">// Support for better error handling</span></div><div class="line"><a name="l00843"></a><span class="lineno"> 843</span>&nbsp; <span class="comment">//------------------------------------------------------------------------------------</span></div><div class="line"><a name="l00844"></a><span class="lineno"> 844</span>&nbsp;</div><div class="line"><a name="l00845"></a><span class="lineno"> 845</span>&nbsp;</div><div class="line"><a name="l00851"></a><span class="lineno"> 851</span>&nbsp; <span class="keyword">virtual</span> <span class="keyword">const</span> <a class="code" href="class_i_d_file.html">IDFile</a>* <a class="code" href="class_i_data_base.html#a307b64264294720e4dd543c98441b5c9">GetSysFileFromOpen</a>() <span class="keyword">const</span> = 0;</div><div class="line"><a name="l00852"></a><span class="lineno"> 852</span>&nbsp;</div><div class="line"><a name="l00853"></a><span class="lineno"> 853</span>&nbsp; <span class="comment">//------------------------------------------------------------------------------------</span></div><div class="line"><a name="l00854"></a><span class="lineno"> 854</span>&nbsp; <span class="comment">// Snapshot Database Handler</span></div><div class="line"><a name="l00855"></a><span class="lineno"> 855</span>&nbsp; <span class="comment">// Used for tracking changes to UIDs for automatic undo redo of commands. </span></div><div class="line"><a name="l00856"></a><span class="lineno"> 856</span>&nbsp; <span class="comment">//------------------------------------------------------------------------------------</span></div><div class="line"><a name="l00857"></a><span class="lineno"> 857</span>&nbsp;</div><div class="line"><a name="l00870"></a><span class="lineno"><a class="code" href="class_i_data_base.html#a97bca0ad8b494d4c26709cc8c4a0b662"> 870</a></span>&nbsp; <span class="keyword">typedef</span> <span class="keyword">enum</span> {kNoUndoSupport, kFullUndoSupport, kPartialUndoSupport} <a class="code" href="class_i_data_base.html#a97bca0ad8b494d4c26709cc8c4a0b662">UndoSupport</a>;</div><div class="line"><a name="l00871"></a><span class="lineno"> 871</span>&nbsp;</div><div class="line"><a name="l00874"></a><span class="lineno"> 874</span>&nbsp; <span class="keyword">virtual</span> <a class="code" href="class_i_data_base.html#a97bca0ad8b494d4c26709cc8c4a0b662">UndoSupport</a> <a class="code" href="class_i_data_base.html#a6ac7a102b384a17db7167898ce840654">GetUndoSupport</a>() <span class="keyword">const</span> = 0;</div><div class="line"><a name="l00875"></a><span class="lineno"> 875</span>&nbsp; </div><div class="line"><a name="l00877"></a><span class="lineno"> 877</span>&nbsp; <span class="keyword">virtual</span> IDBChangesMonitor* <a class="code" href="class_i_data_base.html#a8adc405da02368284b9dd3dd12144ace">GetDBChangesMonitor</a>() <span class="keyword">const</span> = 0;</div><div class="line"><a name="l00878"></a><span class="lineno"> 878</span>&nbsp;</div><div class="line"><a name="l00880"></a><span class="lineno"> 880</span>&nbsp; <span class="keyword">virtual</span> <a class="code" href="class_i_database_snapshot.html">IDatabaseSnapshot</a>* <a class="code" href="class_i_data_base.html#a9f69f47ac10eef4f683655bab8b07a81">GetLastDBSnapshotBeforePubFileSharing</a>() <span class="keyword">const</span> = 0;</div><div class="line"><a name="l00881"></a><span class="lineno"> 881</span>&nbsp;</div><div class="line"><a name="l00884"></a><span class="lineno"> 884</span>&nbsp; <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_i_data_base.html#a1fc5a1b37601a450190706c3075f6fdb">SetDBChangesMonitor</a>(IDBChangesMonitor* dbChangesMonitor, <a class="code" href="class_i_data_base.html#a97bca0ad8b494d4c26709cc8c4a0b662">UndoSupport</a> undoSupport) = 0;</div><div class="line"><a name="l00885"></a><span class="lineno"> 885</span>&nbsp;</div><div class="line"><a name="l00886"></a><span class="lineno"> 886</span>&nbsp; <span class="comment">//------------------------------------------------------------------------------------</span></div><div class="line"><a name="l00887"></a><span class="lineno"> 887</span>&nbsp; <span class="comment">// Support for documents which are not datbases</span></div><div class="line"><a name="l00888"></a><span class="lineno"> 888</span>&nbsp; <span class="comment">//------------------------------------------------------------------------------------</span></div><div class="line"><a name="l00889"></a><span class="lineno"> 889</span>&nbsp; <span class="comment">// InCopy stores documents as XML and merely uses the database as a scratch work file.</span></div><div class="line"><a name="l00890"></a><span class="lineno"> 890</span>&nbsp; <span class="comment">// As a result, assumptions about the user pubfile are invalid. The &quot;faux&quot; user file</span></div><div class="line"><a name="l00891"></a><span class="lineno"> 891</span>&nbsp; <span class="comment">// is our way of informing the database of this situation so as to prevent problems</span></div><div class="line"><a name="l00892"></a><span class="lineno"> 892</span>&nbsp; <span class="comment">// with scripting, the UI and recovery.</span></div><div class="line"><a name="l00894"></a><span class="lineno"> 894</span>&nbsp;<span class="comment"></span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_i_data_base.html#a7563210671875e658a06713212db4f34">SetFauxUserFile</a>(<span class="keyword">const</span> <a class="code" href="class_i_d_file.html">IDFile</a> &amp;newFile) = 0;</div><div class="line"><a name="l00896"></a><span class="lineno"> 896</span>&nbsp; <span class="keyword">virtual</span> bool16 <a class="code" href="class_i_data_base.html#a1de62dbce81572600f7a03a9a911bf87">IsFauxUserFile</a>() <span class="keyword">const</span> = 0;</div><div class="line"><a name="l00897"></a><span class="lineno"> 897</span>&nbsp;</div><div class="line"><a name="l00898"></a><span class="lineno"> 898</span>&nbsp; <span class="comment">//------------------------------------------------------------------------------------</span></div><div class="line"><a name="l00899"></a><span class="lineno"> 899</span>&nbsp; <span class="comment">// More UID functions. Move up with rest between builds; but don&#39;t change vtable now [][]</span></div><div class="line"><a name="l00900"></a><span class="lineno"> 900</span>&nbsp; <span class="comment">//------------------------------------------------------------------------------------</span></div><div class="line"><a name="l00901"></a><span class="lineno"> 901</span>&nbsp; <span class="comment">// Creates a new persistent object in the database. The caller specifies the desired</span></div><div class="line"><a name="l00902"></a><span class="lineno"> 902</span>&nbsp; <span class="comment">// UID of the new object. This will succeed under the following conditions:</span></div><div class="line"><a name="l00903"></a><span class="lineno"> 903</span>&nbsp; <span class="comment">// 1. The requested UID is in the valid range - (currently: 1 &lt;= UID &lt;= 2^31-1)</span></div><div class="line"><a name="l00904"></a><span class="lineno"> 904</span>&nbsp; <span class="comment">// 2. The UID has either never been used, or can be re-used</span></div><div class="line"><a name="l00905"></a><span class="lineno"> 905</span>&nbsp; <span class="comment">// A UID that was used before can only be re-used provided that it does not exist</span></div><div class="line"><a name="l00906"></a><span class="lineno"> 906</span>&nbsp; <span class="comment">// in either the temporary file or the user file. This requires at least calling</span></div><div class="line"><a name="l00907"></a><span class="lineno"> 907</span>&nbsp; <span class="comment">// DeleteUID and DestoryUID, and performing a save operation afterwards if the</span></div><div class="line"><a name="l00908"></a><span class="lineno"> 908</span>&nbsp; <span class="comment">// database protection level is greater than kNoProtection.</span></div><div class="line"><a name="l00909"></a><span class="lineno"> 909</span>&nbsp; <span class="comment">//</span></div><div class="line"><a name="l00910"></a><span class="lineno"> 910</span>&nbsp; <span class="comment">// There may be three outcomes when calling this function. Callers should be prepared:</span></div><div class="line"><a name="l00911"></a><span class="lineno"> 911</span>&nbsp; <span class="comment">//</span></div><div class="line"><a name="l00912"></a><span class="lineno"> 912</span>&nbsp; <span class="comment">// If the function succeeds, the object is created and the function returns kTrue</span></div><div class="line"><a name="l00913"></a><span class="lineno"> 913</span>&nbsp; <span class="comment">// </span></div><div class="line"><a name="l00914"></a><span class="lineno"> 914</span>&nbsp; <span class="comment">// If the function fails because the UID isn&#39;t available to be used (outside of the</span></div><div class="line"><a name="l00915"></a><span class="lineno"> 915</span>&nbsp; <span class="comment">// valid range, not available for re-use yet), the function returns kFalse but the</span></div><div class="line"><a name="l00916"></a><span class="lineno"> 916</span>&nbsp; <span class="comment">// database error state is not set</span></div><div class="line"><a name="l00917"></a><span class="lineno"> 917</span>&nbsp; <span class="comment">//</span></div><div class="line"><a name="l00918"></a><span class="lineno"> 918</span>&nbsp; <span class="comment">// If the function fails for some more insidious reason, it returns kFalse and the </span></div><div class="line"><a name="l00919"></a><span class="lineno"> 919</span>&nbsp; <span class="comment">// database error state is set appropriately</span></div><div class="line"><a name="l00921"></a><span class="lineno"> 921</span>&nbsp;<span class="comment"></span> <span class="keyword">virtual</span> bool16 <a class="code" href="class_i_data_base.html#a8d945b46ae1e713b6df8d29acaab1fd2">PlacementNewUID</a>(<a class="code" href="class_i_d_type.html">ClassID</a> clsID, <a class="code" href="class_i_d_type.html">UID</a> <span class="keywordtype">id</span>) = 0;</div><div class="line"><a name="l00922"></a><span class="lineno"> 922</span>&nbsp;</div><div class="line"><a name="l00923"></a><span class="lineno"> 923</span>&nbsp; <span class="comment">// Returns kTrue if the passed UID is valid for use/re-use with PlacementNewUID()</span></div><div class="line"><a name="l00925"></a><span class="lineno"> 925</span>&nbsp;<span class="comment"></span> <span class="keyword">virtual</span> bool16 <a class="code" href="class_i_data_base.html#afee5d82bcb9091c06e3e94543c3a0b1a">PlacementUIDIsAvailable</a> (<a class="code" href="class_i_d_type.html">UID</a> <span class="keywordtype">id</span>) = 0;</div><div class="line"><a name="l00926"></a><span class="lineno"> 926</span>&nbsp;</div><div class="line"><a name="l00927"></a><span class="lineno"> 927</span>&nbsp; <span class="comment">// Flush dirty objects for RIDX query</span></div><div class="line"><a name="l00929"></a><span class="lineno"> 929</span>&nbsp;<span class="comment"></span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_i_data_base.html#ae241f2d89684da6b856c903f2a63203c">FlushDirtyObjectsForRIDXQuery</a> () = 0;</div><div class="line"><a name="l00930"></a><span class="lineno"> 930</span>&nbsp;</div><div class="line"><a name="l00931"></a><span class="lineno"> 931</span>&nbsp; <span class="comment">// Clone the database</span></div><div class="line"><a name="l00932"></a><span class="lineno"> 932</span>&nbsp; <span class="keyword">virtual</span> <a class="code" href="class_i_data_base.html">IDataBase</a>* Clone() = 0;</div><div class="line"><a name="l00933"></a><span class="lineno"> 933</span>&nbsp;</div><div class="line"><a name="l00934"></a><span class="lineno"> 934</span>&nbsp; <span class="comment">// Clone a database snapshot (for internal use only)</span></div><div class="line"><a name="l00935"></a><span class="lineno"> 935</span>&nbsp; <span class="keyword">virtual</span> DatabaseSnapshotPtr CloneADatabaseSnapshot() = 0;</div><div class="line"><a name="l00936"></a><span class="lineno"> 936</span>&nbsp;</div><div class="line"><a name="l00937"></a><span class="lineno"> 937</span>&nbsp; <span class="comment">// Call this function after an execution context switch took place (call from child task).</span></div><div class="line"><a name="l00938"></a><span class="lineno"> 938</span>&nbsp; <span class="comment">// Necessary regardless whether the datase has been created as a clone.</span></div><div class="line"><a name="l00939"></a><span class="lineno"> 939</span>&nbsp; <span class="keyword">virtual</span> <span class="keywordtype">bool</span> SwitchExecutionContext() = 0;</div><div class="line"><a name="l00940"></a><span class="lineno"> 940</span>&nbsp; <span class="comment">// Call this function before an execution context switch(call from the the parent task).</span></div><div class="line"><a name="l00941"></a><span class="lineno"> 941</span>&nbsp; <span class="comment">// Not necessary if the datase has just been created as a clone</span></div><div class="line"><a name="l00942"></a><span class="lineno"> 942</span>&nbsp; <span class="keyword">virtual</span> <span class="keywordtype">bool</span> PrepareForExecutionContextSwitch() = 0;</div><div class="line"><a name="l00943"></a><span class="lineno"> 943</span>&nbsp;</div><div class="line"><a name="l00944"></a><span class="lineno"> 944</span>&nbsp; <span class="comment">// clone must be a clone if this</span></div><div class="line"><a name="l00945"></a><span class="lineno"> 945</span>&nbsp; <span class="keyword">virtual</span> <a class="code" href="class_i_data_base.html#aeb5462fe60d1a1f2f36bd014a0514510">DBResultCode</a> Merge(<a class="code" href="class_i_data_base.html">IDataBase</a> *clone) = 0;</div><div class="line"><a name="l00946"></a><span class="lineno"> 946</span>&nbsp;</div><div class="line"><a name="l00948"></a><span class="lineno"> 948</span>&nbsp; <span class="keyword">virtual</span> <a class="code" href="class_i_data_base.html#aeb5462fe60d1a1f2f36bd014a0514510">DBResultCode</a> <a class="code" href="class_i_data_base.html#aaab6b412cff614b62cc145fc4f6b175f">DestroyDeletedUID_AfterLastReferenceIsReleased</a>(<a class="code" href="class_i_d_type.html">UID</a> <span class="keywordtype">id</span>) = 0;</div><div class="line"><a name="l00949"></a><span class="lineno"> 949</span>&nbsp;</div><div class="line"><a name="l00951"></a><span class="lineno"> 951</span>&nbsp; <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_i_data_base.html#ad5e087a58344493eef64654b3f486f17">AllowPurge</a>() = 0;</div><div class="line"><a name="l00952"></a><span class="lineno"> 952</span>&nbsp; <span class="keyword">virtual</span> <span class="keywordtype">void</span> DisallowPurge() = 0;</div><div class="line"><a name="l00953"></a><span class="lineno"> 953</span>&nbsp; <span class="keyword">virtual</span> <span class="keywordtype">void</span> DoScheduledPurge() = 0;</div><div class="line"><a name="l00954"></a><span class="lineno"> 954</span>&nbsp; <span class="keyword">virtual</span> <span class="keywordtype">bool</span> IsPurgeAllowed() <span class="keyword">const</span> = 0;</div><div class="line"><a name="l00955"></a><span class="lineno"> 955</span>&nbsp; </div><div class="line"><a name="l00956"></a><span class="lineno"> 956</span>&nbsp; <span class="keyword">virtual</span> <a class="code" href="class_i_data_base.html#aeb5462fe60d1a1f2f36bd014a0514510">DBResultCode</a> AttemptMiniSave() = 0;</div><div class="line"><a name="l00957"></a><span class="lineno"> 957</span>&nbsp; <span class="keyword">virtual</span> <span class="keywordtype">bool</span> PubFileIsShared() <span class="keyword">const</span> = 0;</div><div class="line"><a name="l00958"></a><span class="lineno"> 958</span>&nbsp; </div><div class="line"><a name="l00959"></a><span class="lineno"> 959</span>&nbsp; <span class="comment">/* You can override what Instantiate() does by setting an override function. Use nil to remove a function.</span></div><div class="line"><a name="l00960"></a><span class="lineno"> 960</span>&nbsp;<span class="comment"> SetInstantiateFunction returns the function that was previously being used, in case client code needs to</span></div><div class="line"><a name="l00961"></a><span class="lineno"> 961</span>&nbsp;<span class="comment"> restore it later.</span></div><div class="line"><a name="l00962"></a><span class="lineno"> 962</span>&nbsp;<span class="comment"> */</span></div><div class="line"><a name="l00963"></a><span class="lineno"><a class="code" href="struct_i_data_base_1_1_instantiate_function_obj.html"> 963</a></span>&nbsp; <span class="keyword">struct </span><a class="code" href="struct_i_data_base_1_1_instantiate_function_obj.html">InstantiateFunctionObj</a></div><div class="line"><a name="l00964"></a><span class="lineno"> 964</span>&nbsp; {</div><div class="line"><a name="l00965"></a><span class="lineno"> 965</span>&nbsp; <span class="keyword">virtual</span> <a class="code" href="class_i_p_m_unknown.html">IPMUnknown</a>* operator () (<a class="code" href="class_i_data_base.html">IDataBase</a> *db, <a class="code" href="class_i_d_type.html">UID</a> <span class="keywordtype">id</span>, <a class="code" href="class_i_d_type.html">PMIID</a> faceID) = 0;</div><div class="line"><a name="l00966"></a><span class="lineno"> 966</span>&nbsp; };</div><div class="line"><a name="l00967"></a><span class="lineno"> 967</span>&nbsp;</div><div class="line"><a name="l00968"></a><span class="lineno"> 968</span>&nbsp; <span class="keyword">typedef</span> <a class="code" href="struct_i_data_base_1_1_instantiate_function_obj.html">InstantiateFunctionObj</a>* <a class="code" href="struct_i_data_base_1_1_instantiate_function_obj.html">InstantiateFunction</a>;</div><div class="line"><a name="l00969"></a><span class="lineno"> 969</span>&nbsp;</div><div class="line"><a name="l00970"></a><span class="lineno"> 970</span>&nbsp; <span class="keyword">virtual</span> <a class="code" href="struct_i_data_base_1_1_instantiate_function_obj.html">InstantiateFunction</a> SetInstantiateFunction(<a class="code" href="struct_i_data_base_1_1_instantiate_function_obj.html">InstantiateFunction</a> overrideInstantiate = nil) = 0;</div><div class="line"><a name="l00971"></a><span class="lineno"> 971</span>&nbsp; <span class="keyword">virtual</span> <a class="code" href="struct_i_data_base_1_1_instantiate_function_obj.html">InstantiateFunction</a> GetInstantiateFunction() <span class="keyword">const</span> = 0 ;</div><div class="line"><a name="l00972"></a><span class="lineno"> 972</span>&nbsp;</div><div class="line"><a name="l00973"></a><span class="lineno"> 973</span>&nbsp; <span class="comment">/* It will be called if there is no pubfile associated with file</span></div><div class="line"><a name="l00974"></a><span class="lineno"> 974</span>&nbsp;<span class="comment"> for eg in case of conversion of doc due to different version</span></div><div class="line"><a name="l00975"></a><span class="lineno"> 975</span>&nbsp;<span class="comment"> */</span></div><div class="line"><a name="l00976"></a><span class="lineno"> 976</span>&nbsp; <span class="keyword">virtual</span> <span class="keywordtype">void</span> PromptFileRepaired(<span class="keyword">const</span> <a class="code" href="class_p_m_string.html">PMString</a>&amp; origFileName) = 0;</div><div class="line"><a name="l00977"></a><span class="lineno"> 977</span>&nbsp;</div><div class="line"><a name="l00978"></a><span class="lineno"> 978</span>&nbsp; <span class="comment">/* This will be called if pubfile is associated with file,</span></div><div class="line"><a name="l00979"></a><span class="lineno"> 979</span>&nbsp;<span class="comment"> in this case user will be prompted to save as or continue if he wishes to work</span></div><div class="line"><a name="l00980"></a><span class="lineno"> 980</span>&nbsp;<span class="comment"> on original document</span></div><div class="line"><a name="l00981"></a><span class="lineno"> 981</span>&nbsp;<span class="comment"> */</span></div><div class="line"><a name="l00982"></a><span class="lineno"> 982</span>&nbsp; <span class="keyword">virtual</span> <span class="keywordtype">void</span> PromptForSaveAs(<span class="keyword">const</span> <a class="code" href="class_p_m_string.html">PMString</a>&amp; pubFilePath) = 0;</div><div class="line"><a name="l00983"></a><span class="lineno"> 983</span>&nbsp;</div><div class="line"><a name="l00984"></a><span class="lineno"> 984</span>&nbsp; <span class="comment">/* This is called when file is opened using pre transaction master page.</span></div><div class="line"><a name="l00985"></a><span class="lineno"> 985</span>&nbsp;<span class="comment"> Depending on whether new file has been created or not one of the PromptFileRepaired/PromptForSaveAs prompt is shown to user.</span></div><div class="line"><a name="l00986"></a><span class="lineno"> 986</span>&nbsp;<span class="comment"> */</span></div><div class="line"><a name="l00987"></a><span class="lineno"> 987</span>&nbsp; <span class="keyword">virtual</span> <span class="keywordtype">void</span> PromptForFileOpenedUsingPreTransMasterPage() = 0;</div><div class="line"><a name="l00988"></a><span class="lineno"> 988</span>&nbsp;</div><div class="line"><a name="l00989"></a><span class="lineno"> 989</span>&nbsp; <span class="comment">/*</span></div><div class="line"><a name="l00990"></a><span class="lineno"> 990</span>&nbsp;<span class="comment"> ** Returns true if file has been opened with pre transaction master page or LPM CoWP page. This can be used to show warning to user that previous version of file has been opened.</span></div><div class="line"><a name="l00991"></a><span class="lineno"> 991</span>&nbsp;<span class="comment"> */</span></div><div class="line"><a name="l00992"></a><span class="lineno"> 992</span>&nbsp; <span class="keyword">virtual</span> <span class="keywordtype">bool</span> IsFileReadUsingPreTransMasterPage() = 0;</div><div class="line"><a name="l00993"></a><span class="lineno"> 993</span>&nbsp;</div><div class="line"><a name="l00994"></a><span class="lineno"> 994</span>&nbsp; <span class="comment">/*</span></div><div class="line"><a name="l00995"></a><span class="lineno"> 995</span>&nbsp;<span class="comment"> ** Set the flag which tell whether the file was read using pre transaction master page or LPM CoWP. </span></div><div class="line"><a name="l00996"></a><span class="lineno"> 996</span>&nbsp;<span class="comment"> */</span></div><div class="line"><a name="l00997"></a><span class="lineno"> 997</span>&nbsp; <span class="keyword">virtual</span> <span class="keywordtype">void</span> SetFileIsReadUsingPreTransMasterPage(FileRecoveryMode bMode) = 0;</div><div class="line"><a name="l00998"></a><span class="lineno"> 998</span>&nbsp;</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&nbsp; <span class="keyword">virtual</span> <a class="code" href="class_i_data_base.html#aeb5462fe60d1a1f2f36bd014a0514510">DBResultCode</a> <a class="code" href="class_i_data_base.html#a5088e21fb50dae57b0f761aab4a6e92e">OpenFile</a>(<span class="keyword">const</span> <a class="code" href="class_i_d_file.html">IDFile</a>&amp; whatFile, <a class="code" href="class_i_data_base.html#a7c32e77fc00337524a64e92c6160d81e">ProtectionLevel</a> protLevel, <a class="code" href="class_i_data_base.html#a9dbb56ce3d7e855224035880a8a8599e">OpenFlags</a> openFlag = <a class="code" href="class_i_data_base.html#a9dbb56ce3d7e855224035880a8a8599ea3a9d23bc4ba5b89f8eedc379b7207f57">kWrite</a>, <span class="keywordtype">bool</span> bOpenPreTransVersion = <span class="keyword">false</span>) = 0;</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&nbsp;</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&nbsp; <span class="comment">/*</span></div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&nbsp;<span class="comment"> ** Incase the opening document is corrupted but pre trans master page is present in document.</span></div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&nbsp;<span class="comment"> Log the event that we are going to try to open file using pre trans master page or LPM CoWP page.</span></div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&nbsp;<span class="comment"> */</span></div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&nbsp; <span class="keyword">virtual</span> <span class="keywordtype">void</span> LogFileOpenTriedUsingPreTransMasterPage(FileRecoveryMode bMode) = 0;</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&nbsp; </div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&nbsp; <span class="comment">/* </span></div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&nbsp;<span class="comment"> ** Disable the flag to log pre trans master page log events. This flag make sure that logging is done only once even if Open is called twice. </span></div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&nbsp;<span class="comment"> For e.g. converted documents are opened twice but logging should be done only once for them.</span></div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&nbsp;<span class="comment"> */</span></div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&nbsp; <span class="keyword">virtual</span> <span class="keywordtype">void</span> DisablePreTransMasterEventsLogging() = 0;</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&nbsp;};</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&nbsp;</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&nbsp;</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&nbsp;<span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;</div><div class="line"><a name="l01023"></a><span class="lineno"><a class="code" href="class_d_b_purge_lock.html"> 1023</a></span>&nbsp;<span class="keyword">class </span><a class="code" href="class_d_b_purge_lock.html">DBPurgeLock</a></div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&nbsp;{</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&nbsp;<span class="keyword">public</span>:</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&nbsp; <a class="code" href="class_d_b_purge_lock.html">DBPurgeLock</a>(T *handler) :</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&nbsp; fHandler(handler)</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&nbsp; {</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&nbsp; fHandler-&gt;AllowPurge();</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&nbsp; }</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&nbsp; ~<a class="code" href="class_d_b_purge_lock.html">DBPurgeLock</a>()</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&nbsp; {</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&nbsp; fHandler-&gt;DisallowPurge();</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&nbsp; fHandler-&gt;DoScheduledPurge();</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&nbsp; }</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&nbsp;<span class="keyword">private</span>:</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&nbsp; T *fHandler;</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&nbsp;};</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&nbsp;</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&nbsp;<span class="comment">// define adobe::type_info&lt;IDatabase&gt; specialization so any_regular_t can move IDataBase across DLL boundaries</span></div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&nbsp;ADOBE_NAME_TYPE_0(<span class="stringliteral">&quot;idatabase:indesign:adobe&quot;</span>, <a class="code" href="class_i_data_base.html">IDataBase</a>)</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&nbsp;</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&nbsp;<span class="preprocessor">#endif // __IDATABASE__</span></div></div></div></div><div class="navpath" id="nav-path"><ul><li class="navelem"><a class="el" href="dir_b414fb41bdfd52f0e92898d4ee097632.html">tmpdoxygeninput</a><li class="navelem"><b>IDataBase.h</b><li class="footer">Generated on Mon Oct 21 2019 06:38:44 for InDesign SDK by <a href="http://www.doxygen.org/index.html"> <img alt="doxygen" class="footer" src="doxygen.png" /></a> 1.8.3.1 </ul></div></body></html>
